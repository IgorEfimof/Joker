<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link rel="apple-touch-icon" sizes="180x180" href="icons/icon250.png">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="BSK6.5">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>–ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä —Å—Ç–∞–≤–æ–∫ JOKER</title>
    <script src="https://cdn.jsdelivr.net/npm/tesseract.js@4/dist/tesseract.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            -webkit-tap-highlight-color: transparent;
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            user-select: none;
        }
        
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #e74c3c;
            --background: linear-gradient(135deg, #1a2a6c, #2c3e50, #4a235a);
            --container-bg: rgba(255, 255, 255, 0.95);
            --text-color: #2c3e50;
            --card-bg: rgba(255, 255, 255, 0.9);
            --input-bg: rgba(255, 255, 255, 0.95);
            --input-color: #2c3e50;
            --stats-bg: rgba(240, 240, 240, 0.9);
            --positive-color: #27ae60;
            --negative-color: #e74c3c;
            --neutral-color: #3498db;
            --team1-color: #3498db;
            --team2-color: #e74c3c;
            --moon-color: #f39c12;
            --quarter-color: #9b59b6;
            --weekend-color: #e67e22;
            --prime-time-color: #9b59b6;
            --joker-color: #9b59b6;
            --banana-color: #f1c40f;
            --optimal-color: #2ecc71;
        }
        
        [data-theme="dark"] {
            --primary-color: #3498db;
            --secondary-color: #e74c3c;
            --background: linear-gradient(135deg, #0d1b45, #2c3e50, #3d1e4a);
            --container-bg: rgba(40, 40, 40, 0.95);
            --text-color: #ecf0f1;
            --card-bg: rgba(60, 60, 60, 0.9);
            --input-bg: rgba(50, 50, 50, 0.95);
            --input-color: #ecf0f1;
            --stats-bg: rgba(30, 30, 30, 0.9);
            --team1-color: #5dade2;
            --team2-color: #ec7063;
            --moon-color: #f1c40f;
            --quarter-color: #8e44ad;
            --weekend-color: #e67e22;
            --prime-time-color: #9b59b6;
            --joker-color: #8e44ad;
            --banana-color: #f39c12;
            --optimal-color: #27ae60;
        }
        
        body {
            background: var(--background);
            color: var(--text-color);
            min-height: 100vh;
            padding: 10px;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background 0.3s ease;
            touch-action: manipulation;
            -webkit-text-size-adjust: none;
            text-size-adjust: none;
        }
        
        .container {
            width: 100%;
            max-width: 100%;
            background: var(--container-bg);
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            overflow: hidden;
            transition: all 0.3s ease;
        }
        
        header {
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 15px;
            text-align: center;
            position: relative;
        }
        
        h1 {
            font-size: 1.5rem;
            margin-bottom: 8px;
        }
        
        .subtitle {
            font-size: 0.9rem;
            opacity: 0.9;
        }
        
        .theme-toggle {
            position: absolute;
            top: 15px;
            right: 15px;
            background: rgba(255, 255, 255, 0.2);
            border: none;
            border-radius: 50%;
            width: 35px;
            height: 35px;
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
            transition: transform 0.3s;
        }
        
        .theme-toggle:hover {
            transform: scale(1.1);
        }
        
        .main-content {
            display: flex;
            flex-direction: column;
            padding: 15px;
        }
        
        .upload-section {
            padding: 15px;
            background: var(--card-bg);
            border-radius: 10px;
            margin-bottom: 15px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }
        
        .results-section {
            padding: 15px;
            background: var(--card-bg);
            border-radius: 10px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }
        
        .section-title {
            color: var(--primary-color);
            margin-bottom: 15px;
            padding-bottom: 8px;
            border-bottom: 2px solid var(--primary-color);
            font-size: 1.2rem;
        }
        
        .upload-area {
            border: 2px dashed var(--primary-color);
            border-radius: 8px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            margin-bottom: 15px;
        }
        
        .upload-area:hover {
            background-color: rgba(44, 62, 80, 0.1);
        }
        
        .upload-area.drag-over {
            background-color: rgba(44, 62, 80, 0.2);
            transform: scale(1.01);
        }
        
        .upload-icon {
            font-size: 35px;
            color: var(--primary-color);
            margin-bottom: 10px;
        }
        
        .upload-text {
            font-size: 1rem;
            margin-bottom: 10px;
        }
        
        .upload-btn {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .upload-btn:hover {
            background: #1c2833;
        }
        
        .preview-container {
            margin-top: 15px;
            text-align: center;
        }
        
        .preview-title {
            font-size: 1rem;
            margin-bottom: 8px;
            color: var(--primary-color);
        }
        
        #screenshot-preview {
            max-width: 100%;
            max-height: 200px;
            border-radius: 8px;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
            display: none;
        }
        
        .ocr-results {
            margin-top: 15px;
            padding: 12px;
            background: var(--stats-bg);
            border-radius: 8px;
        }
        
        .ocr-title {
            font-size: 1rem;
            margin-bottom: 10px;
            color: var(--primary-color);
        }
        
        .ocr-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            padding-bottom: 8px;
            border-bottom: 1px solid #ddd;
            font-size: 0.9rem;
        }
        
        .ocr-label {
            font-weight: bold;
            color: var(--primary-color);
        }
        
        .ocr-value {
            font-weight: bold;
        }
        
        .analysis-result {
            margin-top: 20px;
            padding: 15px;
            background: var(--stats-bg);
            border-radius: 8px;
        }
        
        .result-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 12px;
            margin-top: 12px;
            margin-bottom: 15px;
        }
        
        .result-card {
            background: white;
            padding: 12px;
            border-radius: 8px;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
            position: relative;
        }
        
        .result-title {
            font-weight: bold;
            color: var(--primary-color);
            margin-bottom: 8px;
            font-size: 0.9rem;
        }
        
        .result-value {
            font-size: 1.1rem;
            font-weight: bold;
            text-align: center;
        }
        
        .positive {
            color: var(--positive-color);
        }
        
        .negative {
            color: var(--negative-color);
        }
        
        .neutral {
            color: var(--neutral-color);
        }
        
        .recommendation {
            margin-top: 20px;
            padding: 15px;
            background: linear-gradient(90deg, var(--positive-color), #2ecc71);
            color: white;
            border-radius: 8px;
            text-align: center;
        }
        
        .recommendation-title {
            font-size: 1.1rem;
            margin-bottom: 8px;
        }
        
        .recommendation-desc {
            font-size: 0.9rem;
            margin-bottom: 12px;
        }
        
        .confidence {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-top: 8px;
            flex-wrap: wrap;
        }
        
        .confidence-text {
            margin-right: 8px;
            font-size: 0.9rem;
        }
        
        .confidence-bar {
            width: 80px;
            height: 8px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 4px;
            overflow: hidden;
        }
        
        .confidence-fill {
            height: 100%;
            background: white;
            border-radius: 4px;
            transition: width 0.5s ease;
        }
        
        .championship-selector {
            margin: 12px 0;
            padding: 8px;
            background: var(--stats-bg);
            border-radius: 8px;
        }
        
        .championship-label {
            display: block;
            margin-bottom: 6px;
            font-weight: bold;
            color: var(--primary-color);
            font-size: 0.9rem;
        }
        
        .championship-select {
            width: 100%;
            padding: 8px;
            border-radius: 5px;
            border: 1px solid #ddd;
            background: var(--input-bg);
            color: var(--input-color);
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            cursor: pointer;
            font-size: 0.9rem;
        }
        
        .debug-info {
            margin-top: 15px;
            padding: 12px;
            background: #f5f5f5;
            border-radius: 8px;
            font-family: monospace;
            font-size: 0.8rem;
            max-height: 150px;
            overflow-y: auto;
            display: none;
        }
        
        .manual-input {
            margin-top: 15px;
            padding: 12px;
            background: var(--stats-bg);
            border-radius: 8px;
        }
        
        .input-group {
            margin-bottom: 8px;
        }
        
        .input-label {
            display: block;
            margin-bottom: 4px;
            font-weight: bold;
            font-size: 0.9rem;
        }
        
        .input-field {
            width: 100%;
            padding: 10px;
            border-radius: 5px;
            border: 1px solid #ddd;
            background: var(--input-bg);
            color: var(--input-color);
            font-size: 16px;
            cursor: pointer;
            transition: border-color 0.3s;
            caret-color: transparent;
        }
        
        .input-field:focus {
            border-color: var(--primary-color);
            outline: none;
        }
        
        /* Custom Keyboard */
        .custom-keyboard {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background: var(--card-bg);
            padding: 12px;
            box-shadow: 0 -2px 15px rgba(0, 0, 0, 0.2);
            display: none;
            z-index: 1000;
            transition: transform 0.3s ease;
            touch-action: manipulation;
        }
        
        .custom-keyboard.visible {
            display: block;
            transform: translateY(0);
        }
        
        .keyboard-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 8px;
            max-width: 100%;
            margin: 0 auto;
        }
        
        .keyboard-key {
            height: 50px;
            font-size: 1.2rem;
            background: var(--input-bg);
            color: var(--input-color);
            border: 1px solid #ddd;
            border-radius: 6px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
            touch-action: manipulation;
            -webkit-user-select: none;
            user-select: none;
        }
        
        .keyboard-key:hover {
            background: var(--primary-color);
            color: white;
        }
        
        .keyboard-key-wide {
            grid-column: span 2;
        }
        
        .keyboard-action {
            background: var(--primary-color);
            color: white;
        }
        
        .keyboard-action:hover {
            background: var(--secondary-color);
        }
        
        /* Tabs */
        .tabs {
            display: flex;
            margin-bottom: 15px;
            border-bottom: 2px solid var(--primary-color);
            overflow-x: auto;
            white-space: nowrap;
        }
        
        .tab {
            padding: 10px 20px;
            background: var(--card-bg);
            border: none;
            border-radius: 5px 5px 0 0;
            margin-right: 4px;
            cursor: pointer;
            font-weight: bold;
            color: var(--text-color);
            transition: all 0.3s;
            font-size: 0.9rem;
        }
        
        .tab.active {
            background: var(--primary-color);
            color: white;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .action-buttons {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }
        
        .action-btn {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 6px;
            font-size: 0.9rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .analyze-btn {
            background: var(--positive-color);
            color: white;
        }
        
        .analyze-btn:hover {
            background: #219653;
        }
        
        .clear-btn {
            background: var(--negative-color);
            color: white;
        }
        
        .clear-btn:hover {
            background: #c0392b;
        }
        
        /* Media Queries for iPhone */
        @media (max-width: 600px) {
            body {
                padding: 5px;
            }
            
            .container {
                border-radius: 10px;
            }
            
            header {
                padding: 12px;
            }
            
            h1 {
                font-size: 1.3rem;
            }
            
            .section-title {
                font-size: 1.1rem;
            }
            
            .upload-area {
                padding: 15px;
            }
            
            .upload-icon {
                font-size: 30px;
            }
            
            .keyboard-key {
                height: 45px;
                font-size: 1.1rem;
            }
            
            .tabs {
                flex-direction: row;
            }
            
            .tab {
                padding: 8px 16px;
                font-size: 0.8rem;
            }
        }
        
        @media (max-width: 350px) {
            .keyboard-key {
                height: 40px;
                font-size: 1rem;
            }
            
            .tab {
                padding: 6px 12px;
                font-size: 0.7rem;
            }
        }

        .loading {
            display: inline-block;
            width: 18px;
            height: 18px;
            border: 2px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: var(--primary-color);
            animation: spin 1s ease-in-out infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* Hide scrollbar for Chrome, Safari and Opera */
        .tabs::-webkit-scrollbar {
            display: none;
        }
        
        /* Hide scrollbar for IE, Edge and Firefox */
        .tabs {
            -ms-overflow-style: none;  /* IE and Edge */
            scrollbar-width: none;  /* Firefox */
        }
        
        .total-type {
            margin-left: 5px;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 0.8rem;
            background: var(--primary-color);
            color: white;
        }
        
        .total-type.over {
            background: var(--positive-color);
        }
        
        .total-type.under {
            background: var(--negative-color);
        }
        
        .progress-bar {
            height: 8px;
            background-color: #e0e0e0;
            border-radius: 4px;
            margin: 10px 0;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background-color: var(--primary-color);
            border-radius: 4px;
            transition: width 0.5s ease;
        }
        
        .status-message {
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
            text-align: center;
            font-weight: bold;
        }
        
        .status-success {
            background-color: rgba(39, 174, 96, 0.2);
            color: var(--positive-color);
        }
        
        .status-error {
            background-color: rgba(231, 76, 60, 0.2);
            color: var(--negative-color);
        }
        
        .team-score {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            padding: 10px;
            border-radius: 8px;
            background-color: rgba(255, 255, 255, 0.7);
        }
        
        .team-name {
            font-weight: bold;
            color: var(--primary-color);
        }
        
        .team1 .team-name {
            color: var(--team1-color);
        }
        
        .team2 .team-name {
            color: var(--team2-color);
        }
        
        .quarters {
            display: flex;
            gap: 8px;
        }
        
        .quarter-score {
            padding: 4px 8px;
            border-radius: 4px;
            background-color: rgba(0, 0, 0, 0.1);
            font-size: 0.9rem;
        }
        
        .total-score {
            padding: 4px 8px;
            border-radius: 4px;
            background-color: var(--primary-color);
            color: white;
            font-weight: bold;
            font-size: 0.9rem;
        }
        
        .score-container {
            margin-top: 15px;
            padding: 12px;
            background: var(--stats-bg);
            border-radius: 8px;
        }
        
        .score-title {
            font-size: 1rem;
            margin-bottom: 10px;
            color: var(--primary-color);
            text-align: center;
        }
        
        /* New styles for quarter predictions and moon phases */
        .quarter-predictions {
            margin-top: 15px;
            padding: 12px;
            background: var(--stats-bg);
            border-radius: 8px;
        }
        
        .quarter-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 10px;
        }
        
        .quarter-card {
            background: white;
            padding: 10px;
            border-radius: 6px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            text-align: center;
        }
        
        .quarter-name {
            font-weight: bold;
            color: var(--quarter-color);
            font-size: 0.9rem;
            margin-bottom: 5px;
        }
        
        .quarter-prediction {
            font-size: 1rem;
            font-weight: bold;
        }
        
        .moon-info {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-top: 10px;
            padding: 8px;
            background: rgba(243, 156, 18, 0.1);
            border-radius: 6px;
            border-left: 3px solid var(--moon-color);
        }
        
        .moon-icon {
            font-size: 1.2rem;
            margin-right: 8px;
            color: var(--moon-color);
        }
        
        .moon-text {
            font-size: 0.9rem;
            color: var(--moon-color);
        }
        
        .gender-selector {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }
        
        .gender-option {
            flex: 1;
            padding: 8px;
            text-align: center;
            border-radius: 5px;
            background: var(--input-bg);
            cursor: pointer;
            transition: all 0.3s;
            border: 1px solid #ddd;
        }
        
        .gender-option.active {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }
        
        .prediction-details {
            margin-top: 10px;
            font-size: 0.8rem;
            color: #666;
        }
        
        /* Day of week and fatigue styles */
        .day-factor-section, .fatigue-section {
            margin: 12px 0;
            padding: 8px;
            background: var(--stats-bg);
            border-radius: 8px;
        }
        
        .day-selector, .fatigue-selector {
            display: flex;
            gap: 4px;
            margin-top: 6px;
            flex-wrap: wrap;
        }
        
        .day-option {
            flex: 1;
            padding: 8px 4px;
            text-align: center;
            border-radius: 5px;
            background: var(--input-bg);
            cursor: pointer;
            transition: all 0.3s;
            border: 1px solid #ddd;
            font-size: 0.8rem;
            min-width: 30px;
        }
        
        .day-option.active {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }
        
        .fatigue-option {
            flex: 1;
            padding: 8px;
            text-align: center;
            border-radius: 5px;
            background: var(--input-bg);
            cursor: pointer;
            transition: all 0.3s;
            border: 1px solid #ddd;
            font-size: 0.8rem;
            margin-bottom: 4px;
        }
        
        .fatigue-option.active {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }
        
        .fatigue-option.optimal {
            background: linear-gradient(90deg, var(--optimal-color), #27ae60);
            color: white;
            border-color: var(--optimal-color);
            transform: scale(1.05);
            box-shadow: 0 2px 8px rgba(46, 204, 113, 0.3);
            position: relative;
            overflow: hidden;
        }
        
        .fatigue-option.optimal::after {
            content: '‚úì';
            position: absolute;
            top: 2px;
            right: 5px;
            font-size: 0.7rem;
            font-weight: bold;
        }
        
        .day-info {
            margin-top: 8px;
            padding: 6px;
            background: rgba(52, 152, 219, 0.1);
            border-radius: 4px;
            font-size: 0.8rem;
            color: var(--primary-color);
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .weekend-effect {
            background: linear-gradient(90deg, var(--weekend-color), #e67e22);
            color: white;
            padding: 8px;
            border-radius: 6px;
            margin: 10px 0;
            text-align: center;
            font-weight: bold;
        }
        
        .fatigue-warning {
            background: linear-gradient(90deg, var(--negative-color), #c0392b);
            color: white;
            padding: 8px;
            border-radius: 6px;
            margin: 10px 0;
            text-align: center;
            font-weight: bold;
        }
        
        .prime-time {
            background: linear-gradient(90deg, var(--prime-time-color), #8e44ad);
            color: white;
            padding: 8px;
            border-radius: 6px;
            margin: 10px 0;
            text-align: center;
            font-weight: bold;
        }
        
        .factor-badge {
            display: inline-block;
            padding: 2px 6px;
            border-radius: 3px;
            background: var(--primary-color);
            color: white;
            font-size: 0.7rem;
            margin-left: 5px;
        }
        
        .factor-badge.positive {
            background: var(--positive-color);
        }
        
        .factor-badge.negative {
            background: var(--negative-color);
        }
        
        .factor-badge.neutral {
            background: var(--neutral-color);
        }
        
        .day-impact {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-top: 10px;
            padding: 8px;
            background: rgba(52, 152, 219, 0.1);
            border-radius: 6px;
            border-left: 3px solid var(--primary-color);
        }
        
        .day-icon {
            font-size: 1.2rem;
            margin-right: 8px;
            color: var(--primary-color);
        }
        
        .day-text {
            font-size: 0.9rem;
            color: var(--primary-color);
        }
        
        .factors-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 15px;
        }
        
        .factor-card {
            background: white;
            padding: 10px;
            border-radius: 6px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .factor-name {
            font-weight: bold;
            color: var(--primary-color);
            font-size: 0.8rem;
            margin-bottom: 5px;
        }
        
        .factor-value {
            font-size: 0.9rem;
            font-weight: bold;
            text-align: center;
        }
        
        /* Instruction styles */
        .instruction-content {
            padding: 15px;
            background: var(--stats-bg);
            border-radius: 8px;
            max-height: 70vh;
            overflow-y: auto;
        }
        
        .instruction-section {
            margin-bottom: 20px;
        }
        
        .instruction-section h3 {
            color: var(--primary-color);
            margin-bottom: 10px;
            font-size: 1.1rem;
        }
        
        .instruction-section p {
            margin-bottom: 10px;
            line-height: 1.5;
        }
        
        .instruction-section ul {
            margin-left: 20px;
            margin-bottom: 10px;
        }
        
        .instruction-section li {
            margin-bottom: 8px;
            line-height: 1.4;
        }
        
        .instruction-tip {
            background: rgba(52, 152, 219, 0.1);
            border-left: 3px solid var(--primary-color);
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
        }
        
        .instruction-warning {
            background: rgba(231, 76, 60, 0.1);
            border-left: 3px solid var(--negative-color);
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
        }
        
        .instruction-success {
            background: rgba(39, 174, 96, 0.1);
            border-left: 3px solid var(--positive-color);
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
        }
        
        /* New styles for prediction accuracy */
        .prediction-accuracy-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            margin-top: 10px;
        }
        
        .accuracy-value {
            font-size: 1.4rem;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .accuracy-indicator {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            margin-top: 10px;
        }
        
        .indicator-icon {
            font-size: 2.5rem;
            margin-bottom: 5px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.2);
            animation: pulse 2s infinite;
        }
        
        .indicator-text {
            font-size: 0.9rem;
            font-weight: bold;
            padding: 4px 10px;
            border-radius: 20px;
            text-transform: uppercase;
        }
        
        .joker-indicator {
            color: var(--joker-color);
        }
        
        .joker-text {
            background: linear-gradient(90deg, var(--joker-color), #8e44ad);
            color: white;
        }
        
        .banana-indicator {
            color: var(--banana-color);
        }
        
        .banana-text {
            background: linear-gradient(90deg, var(--banana-color), #f39c12);
            color: #2c3e50;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        
        .accuracy-details {
            font-size: 0.8rem;
            color: #666;
            text-align: center;
            margin-top: 5px;
        }
        
        /* Comparison styles */
        .comparison-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 10px;
            padding: 8px;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 6px;
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            min-height: 120px;
            transition: background-image 0.5s ease;
        }
        
        /* –§–æ–Ω–æ–≤—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–ª—è –±–ª–æ–∫–∞ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –ø—Ä–æ–≥–Ω–æ–∑–æ–≤ */
        .comparison-container.joker-bg {
            background-image: url('icons/icon251.png');
        }
        
        .comparison-container.banana-bg {
            background-image: url('icons/icon252.png');
        }
        
        .comparison-item {
            flex: 1;
            text-align: center;
            padding: 5px;
            background: rgba(255, 255, 255, 0.85);
            border-radius: 4px;
            margin: 0 2px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }
        
        .comparison-label {
            font-size: 0.8rem;
            color: var(--primary-color);
            margin-bottom: 3px;
            font-weight: bold;
        }
        
        .comparison-value {
            font-size: 1rem;
            font-weight: bold;
        }
        
        .comparison-difference {
            font-size: 1.2rem;
            font-weight: bold;
            padding: 5px 10px;
            border-radius: 4px;
            min-width: 60px;
            background: rgba(255, 255, 255, 0.9);
        }
        
        .difference-positive {
            background-color: rgba(39, 174, 96, 0.7);
            color: white;
        }
        
        .difference-negative {
            background-color: rgba(231, 76, 60, 0.7);
            color: white;
        }
        
        .difference-neutral {
            background-color: rgba(52, 152, 219, 0.7);
            color: white;
        }
        
        /* Joker/Banana explanation */
        .indicator-explanation {
            margin-top: 10px;
            padding: 8px;
            background: var(--stats-bg);
            border-radius: 6px;
            font-size: 0.8rem;
            text-align: center;
        }
        
        .explanation-title {
            font-weight: bold;
            color: var(--primary-color);
            margin-bottom: 5px;
        }
        
        /* Scanning animation */
        .scanning-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            display: none;
        }
        
        .scanning-content {
            background: var(--container-bg);
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            max-width: 90%;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
        }
        
        .scanning-title {
            font-size: 1.2rem;
            margin-bottom: 15px;
            color: var(--primary-color);
        }
        
        .scanning-text {
            margin-bottom: 20px;
            color: var(--text-color);
        }
        
        .scanning-progress {
            width: 100%;
            height: 8px;
            background: var(--stats-bg);
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 15px;
        }
        
        .scanning-progress-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
            border-radius: 4px;
            width: 0%;
            transition: width 0.5s ease;
        }
        
        .scanning-steps {
            display: flex;
            justify-content: space-between;
            margin-top: 15px;
            flex-wrap: wrap;
        }
        
        .scanning-step {
            flex: 1;
            text-align: center;
            padding: 8px;
            margin: 0 2px;
            border-radius: 4px;
            background: var(--stats-bg);
            transition: all 0.3s;
            min-width: 100px;
        }
        
        .scanning-step.active {
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
            color: white;
            transform: scale(1.05);
        }
        
        .scanning-step.completed {
            background: var(--positive-color);
            color: white;
        }
        
        /* Optimal result styles */
        .optimal-result {
            background: linear-gradient(90deg, var(--optimal-color), #2ecc71);
            color: white;
            padding: 10px;
            border-radius: 8px;
            margin: 10px 0;
            text-align: center;
            animation: glow 2s infinite alternate;
        }
        
        @keyframes glow {
            from { box-shadow: 0 0 5px rgba(46, 204, 113, 0.5); }
            to { box-shadow: 0 0 15px rgba(46, 204, 113, 0.8); }
        }
        
        .optimal-title {
            font-size: 1.1rem;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .optimal-details {
            font-size: 0.9rem;
        }
        
        /* Fatigue comparison table */
        .fatigue-comparison {
            margin-top: 15px;
            overflow-x: auto;
        }
        
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 6px rgba(0,0,0,0.1);
        }
        
        .comparison-table th {
            background: var(--primary-color);
            color: white;
            padding: 10px;
            text-align: center;
            font-size: 0.8rem;
        }
        
        .comparison-table td {
            padding: 8px;
            text-align: center;
            border-bottom: 1px solid #eee;
            font-size: 0.9rem;
        }
        
        .comparison-table tr:last-child td {
            border-bottom: none;
        }
        
        .comparison-table tr.optimal-row {
            background: linear-gradient(90deg, rgba(46, 204, 113, 0.1), rgba(39, 174, 96, 0.1));
        }
        
        .difference-cell {
            font-weight: bold;
        }
        
        .difference-cell.optimal {
            color: var(--optimal-color);
            font-weight: bold;
        }
        
        .difference-cell.good {
            color: var(--positive-color);
        }
        
        .difference-cell.poor {
            color: var(--negative-color);
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>–ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä —Å—Ç–∞–≤–æ–∫ JOKER</h1>
            <div class="subtitle">–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫ –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–π —É—Å—Ç–∞–ª–æ—Å—Ç–∏ –∫–æ–º–∞–Ω–¥</div>
            <button class="theme-toggle" id="theme-toggle">üåô</button>
        </header>
        
        <div class="tabs">
            <button class="tab active" data-tab="upload">–ó–∞–≥—Ä—É–∑–∫–∞</button>
            <button class="tab" data-tab="results">–†–µ–∑—É–ª—å—Ç–∞—Ç—ã</button>
            <button class="tab" data-tab="stats">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</button>
            <button class="tab" data-tab="quarters">–ü—Ä–æ–≥–Ω–æ–∑ –ø–æ —á–µ—Ç–≤–µ—Ä—Ç—è–º</button>
            <button class="tab" data-tab="factors">–§–∞–∫—Ç–æ—Ä—ã –≤–ª–∏—è–Ω–∏—è</button>
            <button class="tab" data-tab="instruction">–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è</button>
        </div>
        
        <div class="main-content">
            <div class="upload-section tab-content active" id="upload-tab">
                <h2 class="section-title">–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö</h2>
                
                <div class="championship-selector">
                    <label class="championship-label">–õ–∏–≥–∞:</label>
                    <select class="championship-select" id="league-select">
                        <option value="12_4">NBA (4√ó12 –º–∏–Ω)</option>
                        <option value="10_4">–§–ò–ë–ê (4√ó10 –º–∏–Ω)</option>
                        <option value="12_4_3x3">3√ó3 (4√ó12 –º–∏–Ω)</option>
                        <option value="10_4_3x3">3√ó3 (4√ó10 –º–∏–Ω)</option>
                        <option value="10_2_4x4">4√ó4 (2√ó10 –º–∏–Ω)</option>
                        <option value="5_4_cyber">–ö–∏–±–µ—Ä–±–∞—Å–∫–µ—Ç–±–æ–ª (4√ó5 –º–∏–Ω)</option>
                    </select>
                </div>
                
                <!-- –ù–û–í–´–ô –ë–õ–û–ö: –î–µ–Ω—å –Ω–µ–¥–µ–ª–∏ -->
                <div class="day-factor-section">
                    <label class="championship-label">–î–µ–Ω—å –Ω–µ–¥–µ–ª–∏:</label>
                    <div class="day-selector">
                        <div class="day-option" data-day="1">–ü–ù</div>
                        <div class="day-option" data-day="2">–í–¢</div>
                        <div class="day-option" data-day="3">–°–†</div>
                        <div class="day-option" data-day="4">–ß–¢</div>
                        <div class="day-option active" data-day="5">–ü–¢</div>
                        <div class="day-option" data-day="6">–°–ë</div>
                        <div class="day-option" data-day="0">–í–°</div>
                    </div>
                    <div class="day-info" id="day-info">
                        <i class="fas fa-info-circle"></i>
                        <span>–ü—è—Ç–Ω–∏—Ü–∞: –≤—ã—Å–æ–∫–∞—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏–≤–Ω–æ—Å—Ç—å (+4.2%)</span>
                    </div>
                </div>
                
                <!-- –ù–û–í–´–ô –ë–õ–û–ö: –£—Å—Ç–∞–ª–æ—Å—Ç—å –∫–æ–º–∞–Ω–¥ (—Ç–µ–ø–µ—Ä—å —Ç–æ–ª—å–∫–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ) -->
                <div class="fatigue-section">
                    <label class="championship-label">–£—Å—Ç–∞–ª–æ—Å—Ç—å –∫–æ–º–∞–Ω–¥ (–∞–≤—Ç–æ–≤—ã–±–æ—Ä):</label>
                    <div class="fatigue-selector" id="fatigue-display">
                        <div class="fatigue-option" data-fatigue="rested">–û—Ç–¥–æ—Ö–Ω—É–≤—à–∏–µ (+2 –¥–Ω—è)</div>
                        <div class="fatigue-option" data-fatigue="normal">–ù–æ—Ä–º–∞–ª—å–Ω—ã–π –æ—Ç–¥—ã—Ö (+1 –¥–µ–Ω—å)</div>
                        <div class="fatigue-option" data-fatigue="tired">Back-to-back (-5.7%)</div>
                        <div class="fatigue-option" data-fatigue="exhausted">3 –∏–≥—Ä—ã –∑–∞ 4 –¥–Ω—è (-8.3%)</div>
                    </div>
                    <div class="optimal-result" id="optimal-result" style="display: none;">
                        <div class="optimal-title">üéØ –û–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç –Ω–∞–π–¥–µ–Ω!</div>
                        <div class="optimal-details" id="optimal-details">–ó–∞–≥—Ä—É–∑–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–∏—Å–∫–∞</div>
                    </div>
                </div>
                
                <div class="gender-selector">
                    <div class="gender-option active" data-gender="male">–ú—É–∂—á–∏–Ω—ã</div>
                    <div class="gender-option" data-gender="female">–ñ–µ–Ω—â–∏–Ω—ã</div>
                    <div class="gender-option" data-gender="mixed">–°–º–µ—à–∞–Ω–Ω—ã–µ</div>
                </div>
                
                <div class="moon-info">
                    <div class="moon-icon" id="moon-icon">üåë</div>
                    <div class="moon-text" id="moon-text">–†–∞—Å—á–µ—Ç –ª—É–Ω–Ω–æ–π —Ñ–∞–∑—ã...</div>
                </div>
                
                <div class="upload-area" id="upload-area">
                    <div class="upload-icon">
                        <i class="fas fa-camera"></i>
                    </div>
                    <div class="upload-text">
                        –ù–∞–∂–º–∏—Ç–µ –¥–ª—è –≤—ã–±–æ—Ä–∞ —Ñ–∞–π–ª–∞ –∏–ª–∏ –ø–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —Å–∫—Ä–∏–Ω—à–æ—Ç
                    </div>
                    <button class="upload-btn" id="upload-btn">–í—ã–±—Ä–∞—Ç—å —Ñ–∞–π–ª</button>
                </div>
                
                <input type="file" id="screenshot-input" accept="image/*" style="display: none;">
                
                <div class="preview-container">
                    <div class="preview-title">–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä:</div>
                    <img id="screenshot-preview" src="" alt="–ü—Ä–µ–≤—å—é —Å–∫—Ä–∏–Ω—à–æ—Ç–∞">
                </div>
                
                <div class="progress-bar" id="progress-bar" style="display: none;">
                    <div class="progress-fill" id="progress-fill" style="width: 0%"></div>
                </div>
                
                <div id="status-message"></div>
                
                <div class="manual-input">
                    <h3>–ò–ª–∏ –≤–≤–µ–¥–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –≤—Ä—É—á–Ω—É—é:</h3>
                    <div class="input-group">
                        <label class="input-label">–°—á–µ—Ç (–ö–æ–º–∞–Ω–¥–∞ 1 : –ö–æ–º–∞–Ω–¥–∞ 2)</label>
                        <input type="text" class="input-field" id="manual-score" placeholder="100:92" readonly>
                    </div>
                    <div class="input-group">
                        <label class="input-label">–ü–µ—Ä–∏–æ–¥</label>
                        <input type="number" class="input-field" id="manual-period" placeholder="1-4" min="1" max="4" readonly>
                    </div>
                    <div class="input-group">
                        <label class="input-label">–í—Ä–µ–º—è (–º–∏–Ω:—Å–µ–∫)</label>
                        <input type="text" class="input-field" id="manual-time" placeholder="01:27" readonly>
                    </div>
                    <div class="input-group">
                        <label class="input-label">–¢–æ—Ç–∞–ª</label>
                        <input type="text" class="input-field" id="manual-total" placeholder="237.5" readonly>
                    </div>
                    <div class="input-group">
                        <label class="input-label">–¢–∏–ø —Ç–æ—Ç–∞–ª–∞</label>
                        <select class="input-field" id="manual-total-type" style="appearance: menulist;">
                            <option value="over">–¢–ë (–¢–æ—Ç–∞–ª –±–æ–ª—å—à–µ)</option>
                            <option value="under">–¢–ú (–¢–æ—Ç–∞–ª –º–µ–Ω—å—à–µ)</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <label class="input-label">–§–æ—Ä–∞</label>
                        <input type="text" class="input-field" id="manual-handicap" placeholder="-6.5" readonly>
                    </div>
                    
                    <div class="action-buttons">
                        <button class="action-btn analyze-btn" id="manual-submit">–ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å (–∞–≤—Ç–æ–ø–æ–∏—Å–∫)</button>
                        <button class="action-btn clear-btn" id="clear-btn">–û—á–∏—Å—Ç–∏—Ç—å</button>
                    </div>
                </div>
                
                <div class="score-container">
                    <h3 class="score-title">–†–∞—Å–ø–æ–∑–Ω–∞–Ω–Ω—ã–π —Å—á–µ—Ç –ø–æ –ø–µ—Ä–∏–æ–¥–∞–º</h3>
                    <div class="team-score team1">
                        <span class="team-name" id="team1-name">–ö–æ–º–∞–Ω–¥–∞ 1</span>
                        <div class="quarters">
                            <span class="quarter-score" id="team1-q1">-</span>
                            <span class="quarter-score" id="team1-q2">-</span>
                            <span class="quarter-score" id="team1-q3">-</span>
                            <span class="quarter-score" id="team1-q4">-</span>
                            <span class="total-score" id="team1-total">0</span>
                        </div>
                    </div>
                    <div class="team-score team2">
                        <span class="team-name" id="team2-name">–ö–æ–º–∞–Ω–¥–∞ 2</span>
                        <div class="quarters">
                            <span class="quarter-score" id="team2-q1">-</span>
                            <span class="quarter-score" id="team2-q2">-</span>
                            <span class="quarter-score" id="team2-q3">-</span>
                            <span class="quarter-score" id="team2-q4">-</span>
                            <span class="total-score" id="team2-total">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="ocr-results">
                    <h3 class="ocr-title">–†–∞—Å–ø–æ–∑–Ω–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:</h3>
                    <div class="ocr-item">
                        <span class="ocr-label">–°—á–µ—Ç:</span>
                        <span class="ocr-value" id="ocr-score">--</span>
                    </div>
                    <div class="ocr-item">
                        <span class="ocr-label">–ü–µ—Ä–∏–æ–¥:</span>
                        <span class="ocr-value" id="ocr-period">--</span>
                    </div>
                    <div class="ocr-item">
                        <span class="ocr-label">–í—Ä–µ–º—è:</span>
                        <span class="ocr-value" id="ocr-time">--</span>
                    </div>
                    <div class="ocr-item">
                        <span class="ocr-label">–û—Å—Ç–∞–≤—à–µ–µ—Å—è –≤—Ä–µ–º—è:</span>
                        <span class="ocr-value" id="ocr-time-remaining">--</span>
                    </div>
                    <div class="ocr-item">
                        <span class="ocr-label">–¢–æ—Ç–∞–ª:</span>
                        <span class="ocr-value" id="ocr-total">--</span>
                    </div>
                    <div class="ocr-item">
                        <span class="ocr-label">–¢–∏–ø —Ç–æ—Ç–∞–ª–∞:</span>
                        <span class="ocr-value" id="ocr-total-type">--</span>
                    </div>
                    <div class="ocr-item">
                        <span class="ocr-label">–§–æ—Ä–∞:</span>
                        <span class="ocr-value" id="ocr-handicap">--</span>
                    </div>
                </div>
                
                <div class="debug-info" id="debug-info">
                    <h4>–û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:</h4>
                    <div id="debug-text"></div>
                </div>
            </div>
            
            <div class="results-section tab-content" id="results-tab">
                <h2 class="section-title">–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞</h2>
                
                <div class="analysis-result">
                    <h3>–ü—Ä–æ–≥–Ω–æ–∑ –Ω–∞ –æ—Å—Ç–∞–≤—à—É—é—Å—è —á–∞—Å—Ç—å –º–∞—Ç—á–∞</h3>
                    
                    <div class="result-grid">
                        <div class="result-card">
                            <div class="result-title">–û–∂–∏–¥–∞–µ–º—ã–π —Ç–æ—Ç–∞–ª</div>
                            <div class="result-value neutral" id="predicted-total">--</div>
                        </div>
                        
                        <div class="result-card">
                            <div class="result-title">–¢–µ–º–ø –∏–≥—Ä—ã</div>
                            <div class="result-value neutral" id="predicted-pace">--</div>
                        </div>
                        
                        <div class="result-card">
                            <div class="result-title">–ü—Ä–æ–≥–Ω–æ–∑ —Å—á–µ—Ç–∞</div>
                            <div class="result-value neutral" id="predicted-score">--</div>
                        </div>
                        
                        <div class="result-card">
                            <div class="result-title">–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø—Ä–æ–≥–Ω–æ–∑–æ–≤</div>
                            <div class="prediction-accuracy-container">
                                <div class="accuracy-value" id="prediction-accuracy">--</div>
                                
                                <!-- –ë–ª–æ–∫ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –ø—Ä–æ–≥–Ω–æ–∑–∞ —Å—á–µ—Ç–∞ –∏ –æ–∂–∏–¥–∞–µ–º–æ–≥–æ —Ç–æ—Ç–∞–ª–∞ -->
                                <div class="comparison-container" id="comparison-container" style="display: none;">
                                    <div class="comparison-item">
                                        <div class="comparison-label">–ü—Ä–æ–≥–Ω–æ–∑ —Å—á–µ—Ç–∞</div>
                                        <div class="comparison-value" id="score-prediction-value">--</div>
                                    </div>
                                    <div class="comparison-item">
                                        <div class="comparison-label">–û–∂–∏–¥–∞–µ–º—ã–π —Ç–æ—Ç–∞–ª</div>
                                        <div class="comparison-value" id="total-prediction-value">--</div>
                                    </div>
                                    <div class="comparison-item">
                                        <div class="comparison-label">–†–∞–∑–Ω–∏—Ü–∞</div>
                                        <div class="comparison-difference neutral" id="prediction-difference">--</div>
                                    </div>
                                </div>
                                
                                <!-- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä Joker/Banana -->
                                <div class="accuracy-indicator" id="accuracy-indicator" style="display: none;">
                                    <div class="indicator-icon" id="indicator-icon">üÉè</div>
                                    <div class="indicator-text joker-text" id="indicator-text">JOKER</div>
                                </div>
                                
                                <div class="accuracy-details" id="accuracy-details"></div>
                            </div>
                            
                            <!-- –û–±—ä—è—Å–Ω–µ–Ω–∏–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ -->
                            <div class="indicator-explanation" id="indicator-explanation" style="display: none;">
                                <div class="explanation-title">–û–±—ä—è—Å–Ω–µ–Ω–∏–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤:</div>
                                <div id="explanation-text">–ß–µ–º –º–µ–Ω—å—à–µ —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–µ –º–µ–∂–¥—É –ø—Ä–æ–≥–Ω–æ–∑–æ–º —Å—á–µ—Ç–∞ –∏ –æ–∂–∏–¥–∞–µ–º—ã–º —Ç–æ—Ç–∞–ª–æ–º, —Ç–µ–º —Ç–æ—á–Ω–µ–µ –ø—Ä–æ–≥–Ω–æ–∑</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ —É—Å—Ç–∞–ª–æ—Å—Ç–∏ -->
                    <div class="fatigue-comparison" id="fatigue-comparison" style="display: none;">
                        <h4>–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ —É—Å—Ç–∞–ª–æ—Å—Ç–∏:</h4>
                        <table class="comparison-table">
                            <thead>
                                <tr>
                                    <th>–£—Å—Ç–∞–ª–æ—Å—Ç—å</th>
                                    <th>–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç</th>
                                    <th>–ü—Ä–æ–≥–Ω–æ–∑ —Å—á–µ—Ç–∞</th>
                                    <th>–ü—Ä–æ–≥–Ω–æ–∑ —Ç–æ—Ç–∞–ª–∞</th>
                                    <th>–†–∞–∑–Ω–∏—Ü–∞</th>
                                </tr>
                            </thead>
                            <tbody id="fatigue-comparison-body">
                                <!-- –ó–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <div class="recommendation">
                    <div class="recommendation-title">–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è —Å—Ç–∞–≤–∫–∞</div>
                    <div class="recommendation-desc" id="recommendation-text">–ó–∞–≥—Ä—É–∑–∏—Ç–µ —Å–∫—Ä–∏–Ω—à–æ—Ç –∏–ª–∏ –≤–≤–µ–¥–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ</div>
                    
                    <div class="confidence">
                        <span class="confidence-text">–£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å:</span>
                        <div class="confidence-bar">
                            <div class="confidence-fill" id="confidence-bar" style="width: 0%"></div>
                        </div>
                        <span id="confidence-value" style="margin-left: 8px;">0%</span>
                    </div>
                </div>
            </div>
            
            <div class="results-section tab-content" id="stats-tab">
                <h2 class="section-title">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –º–∞—Ç—á–∞</h2>
                
                <div class="analysis-result">
                    <h3>–ö–ª—é—á–µ–≤—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏</h3>
                    
                    <div class="result-grid">
                        <div class="result-card">
                            <div class="result-title">–¢–µ–∫—É—â–∏–π —Ç–µ–º–ø –∏–≥—Ä—ã</div>
                            <div class="result-value neutral" id="current-pace">--</div>
                        </div>
                        
                        <div class="result-card">
                            <div class="result-title">–°—Ä–µ–¥–Ω–∏–π —Ç–µ–º–ø –ª–∏–≥–∏</div>
                            <div class="result-value neutral" id="league-pace">--</div>
                        </div>
                        
                        <div class="result-card">
                            <div class="result-title">–ü—Ä–æ–≥—Ä–µ—Å—Å –º–∞—Ç—á–∞</div>
                            <div class="result-value neutral" id="match-progress">--</div>
                        </div>
                        
                        <div class="result-card">
                            <div class="result-title">–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∞—Ç–∞–∫–∏</div>
                            <div class="result-value neutral" id="offensive-efficiency">--</div>
                        </div>
                    </div>
                    
                    <div class="result-grid" style="grid-template-columns: 1fr 1fr; margin-top: 15px;">
                        <div class="result-card">
                            <div class="result-title" id="team1-stats-name">–ö–æ–º–∞–Ω–¥–∞ 1 (PPG)</div>
                            <div class="result-value neutral" id="team1-ppg">--</div>
                        </div>
                        
                        <div class="result-card">
                            <div class="result-title" id="team2-stats-name">–ö–æ–º–∞–Ω–¥–∞ 2 (PPG)</div>
                            <div class="result-value neutral" id="team2-ppg">--</div>
                        </div>
                    </div>
                </div>
                
                <div class="recommendation">
                    <div class="recommendation-title">–ê–Ω–∞–ª–∏–∑ —Ç–æ—Ç–∞–ª–∞</div>
                    <div class="recommendation-desc" id="total-analysis">–ó–∞–≥—Ä—É–∑–∏—Ç–µ —Å–∫—Ä–∏–Ω—à–æ—Ç –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞</div>
                    
                    <div class="confidence">
                        <span class="confidence-text">–¢–æ—á–Ω–æ—Å—Ç—å –∞–Ω–∞–ª–∏–∑–∞:</span>
                        <div class="confidence-bar">
                            <div class="confidence-fill" id="analysis-confidence-bar" style="width: 0%"></div>
                        </div>
                        <span id="analysis-confidence-value" style="margin-left: 8px;">0%</span>
                    </div>
                </div>
            </div>
            
            <div class="results-section tab-content" id="quarters-tab">
                <h2 class="section-title">–ü—Ä–æ–≥–Ω–æ–∑ –ø–æ —á–µ—Ç–≤–µ—Ä—Ç—è–º</h2>
                
                <div class="quarter-predictions">
                    <h3>–ü—Ä–æ–≥–Ω–æ–∑ –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–µ —á–µ—Ç–≤–µ—Ä—Ç–∏</h3>
                    
                    <div class="quarter-grid">
                        <div class="quarter-card">
                            <div class="quarter-name">2-—è —á–µ—Ç–≤–µ—Ä—Ç—å</div>
                            <div class="quarter-prediction" id="q2-prediction">--</div>
                            <div class="prediction-details" id="q2-details">–¢–ë/–¢–ú: --</div>
                        </div>
                        
                        <div class="quarter-card">
                            <div class="quarter-name">3-—è —á–µ—Ç–≤–µ—Ä—Ç—å</div>
                            <div class="quarter-prediction" id="q3-prediction">--</div>
                            <div class="prediction-details" id="q3-details">–¢–ë/–¢–ú: --</div>
                        </div>
                    </div>
                    
                    <div class="moon-info">
                        <div class="moon-icon" id="moon-impact-icon">üåï</div>
                        <div class="moon-text" id="moon-impact-text">–í–ª–∏—è–Ω–∏–µ –ª—É–Ω–Ω–æ–π —Ñ–∞–∑—ã: —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è...</div>
                    </div>
                </div>
                
                <div class="analysis-result">
                    <h3>–§–∞–∫—Ç–æ—Ä—ã –≤–ª–∏—è–Ω–∏—è –Ω–∞ —á–µ—Ç–≤–µ—Ä—Ç–∏</h3>
                    
                    <div class="result-grid">
                        <div class="result-card">
                            <div class="result-title">–í–ª–∏—è–Ω–∏–µ –ø–æ–ª–∞ –∫–æ–º–∞–Ω–¥</div>
                            <div class="result-value neutral" id="gender-impact">--</div>
                        </div>
                        
                        <div class="result-card">
                            <div class="result-title">–ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–π —Ç–µ–º–ø 2-–π —á–µ—Ç–≤–µ—Ä—Ç–∏</div>
                            <div class="result-value neutral" id="q2-historical">--</div>
                        </div>
                        
                        <div class="result-card">
                            <div class="result-title">–ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–π —Ç–µ–º–ø 3-–π —á–µ—Ç–≤–µ—Ä—Ç–∏</div>
                            <div class="result-value neutral" id="q3-historical">--</div>
                        </div>
                        
                        <div class="result-card">
                            <div class="result-title">–õ—É–Ω–Ω—ã–π –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç</div>
                            <div class="result-value neutral" id="moon-coefficient">--</div>
                        </div>
                    </div>
                </div>
                
                <div class="recommendation">
                    <div class="recommendation-title">–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è –ø–æ —á–µ—Ç–≤–µ—Ä—Ç—è–º</div>
                    <div class="recommendation-desc" id="quarters-recommendation">–ó–∞–≥—Ä—É–∑–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –ø–æ —Å—Ç–∞–≤–∫–∞–º –Ω–∞ —á–µ—Ç–≤–µ—Ä—Ç–∏</div>
                    
                    <div class="confidence">
                        <span class="confidence-text">–¢–æ—á–Ω–æ—Å—Ç—å –ø—Ä–æ–≥–Ω–æ–∑–∞:</span>
                        <div class="confidence-bar">
                            <div class="confidence-fill" id="quarters-confidence-bar" style="width: 0%"></div>
                        </div>
                        <span id="quarters-confidence-value" style="margin-left: 8px;">0%</span>
                    </div>
                </div>
            </div>
            
            <!-- –ù–û–í–ê–Ø –í–ö–õ–ê–î–ö–ê: –§–∞–∫—Ç–æ—Ä—ã –≤–ª–∏—è–Ω–∏—è -->
            <div class="results-section tab-content" id="factors-tab">
                <h2 class="section-title">–§–∞–∫—Ç–æ—Ä—ã –≤–ª–∏—è–Ω–∏—è –Ω–∞ –º–∞—Ç—á</h2>
                
                <div class="analysis-result">
                    <h3>–í–ª–∏—è–Ω–∏–µ –¥–Ω—è –Ω–µ–¥–µ–ª–∏ –∏ —É—Å—Ç–∞–ª–æ—Å—Ç–∏</h3>
                    
                    <div id="day-impact-container">
                        <!-- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è JavaScript -->
                    </div>
                    
                    <div class="factors-grid">
                        <div class="factor-card">
                            <div class="factor-name">–î–µ–Ω—å –Ω–µ–¥–µ–ª–∏</div>
                            <div class="factor-value" id="day-factor-value">--</div>
                        </div>
                        
                        <div class="factor-card">
                            <div class="factor-name">–£—Å—Ç–∞–ª–æ—Å—Ç—å –∫–æ–º–∞–Ω–¥</div>
                            <div class="factor-value" id="fatigue-factor-value">--</div>
                        </div>
                        
                        <div class="factor-card">
                            <div class="factor-name">–ü–æ–ª –∫–æ–º–∞–Ω–¥</div>
                            <div class="factor-value" id="gender-factor-value">--</div>
                        </div>
                        
                        <div class="factor-card">
                            <div class="factor-name">–õ—É–Ω–Ω–∞—è —Ñ–∞–∑–∞</div>
                            <div class="factor-value" id="moon-factor-value">--</div>
                        </div>
                    </div>
                    
                    <div class="result-grid" style="margin-top: 15px;">
                        <div class="result-card">
                            <div class="result-title">–°—É–º–º–∞—Ä–Ω—ã–π –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –≤–ª–∏—è–Ω–∏—è</div>
                            <div class="result-value neutral" id="total-factor-value">--</div>
                        </div>
                    </div>
                </div>
                
                <div class="recommendation">
                    <div class="recommendation-title">–ò—Ç–æ–≥–æ–≤—ã–π –∞–Ω–∞–ª–∏–∑ —Ñ–∞–∫—Ç–æ—Ä–æ–≤</div>
                    <div class="recommendation-desc" id="factors-analysis">–ó–∞–≥—Ä—É–∑–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Ñ–∞–∫—Ç–æ—Ä–æ–≤ –≤–ª–∏—è–Ω–∏—è</div>
                    
                    <div class="confidence">
                        <span class="confidence-text">–í–ª–∏—è–Ω–∏–µ –Ω–∞ —Ç–æ—á–Ω–æ—Å—Ç—å:</span>
                        <div class="confidence-bar">
                            <div class="confidence-fill" id="factors-confidence-bar" style="width: 0%"></div>
                        </div>
                        <span id="factors-confidence-value" style="margin-left: 8px;">0%</span>
                    </div>
                </div>
            </div>
            
            <!-- –ù–û–í–ê–Ø –í–ö–õ–ê–î–ö–ê: –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è -->
            <div class="results-section tab-content" id="instruction-tab">
                <h2 class="section-title">–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é</h2>
                
                <div class="instruction-content">
                    <div class="instruction-section">
                        <h3>üéØ –û—Å–Ω–æ–≤–Ω–æ–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ</h3>
                        <p>–ü—Ä–æ–≥—Ä–∞–º–º–∞ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –±–∞—Å–∫–µ—Ç–±–æ–ª—å–Ω—ã–µ –º–∞—Ç—á–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Å—Ç–∞–≤–∫–∞–º –Ω–∞ —Ç–æ—Ç–∞–ª—ã (–¢–ë/–¢–ú) —Å —É—á–µ—Ç–æ–º –º–Ω–æ–∂–µ—Å—Ç–≤–∞ —Ñ–∞–∫—Ç–æ—Ä–æ–≤.</p>
                        <p><strong>–ù–û–í–ê–Ø –§–£–ù–ö–¶–ò–Ø:</strong> –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫ –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è —É—Å—Ç–∞–ª–æ—Å—Ç–∏ –∫–æ–º–∞–Ω–¥!</p>
                    </div>
                    
                    <div class="instruction-section">
                        <h3>üì± –ö–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è</h3>
                        
                        <h4>1. –ù–∞—á–∞–ª–æ —Ä–∞–±–æ—Ç—ã</h4>
                        <ul>
                            <li>–û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–æ–≥—Ä–∞–º–º—É –≤ –±—Ä–∞—É–∑–µ—Ä–µ</li>
                            <li>–í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–¥—Ö–æ–¥—è—â—É—é —Ç–µ–º—É (—Å–≤–µ—Ç–ª–∞—è/—Ç–µ–º–Ω–∞—è) –∫–Ω–æ–ø–∫–æ–π –≤ –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É</li>
                        </ul>
                        
                        <h4>2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –º–∞—Ç—á–∞</h4>
                        <p><strong>–õ–∏–≥–∞:</strong></p>
                        <ul>
                            <li>–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –ª–∏–≥–∏ (NBA, –§–ò–ë–ê, 3√ó3, 4√ó4, –ö–∏–±–µ—Ä–±–∞—Å–∫–µ—Ç–±–æ–ª)</li>
                            <li>–ü—Ä–æ–≥—Ä–∞–º–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Å—Ç—Ä–æ–∏—Ç —Ä–∞—Å—á–µ—Ç—ã –ø–æ–¥ –≤—ã–±—Ä–∞–Ω–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç</li>
                        </ul>
                        
                        <p><strong>–î–µ–Ω—å –Ω–µ–¥–µ–ª–∏:</strong></p>
                        <ul>
                            <li>–£–∫–∞–∂–∏—Ç–µ –¥–µ–Ω—å –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è –º–∞—Ç—á–∞</li>
                            <li>–ü—Ä–æ–≥—Ä–∞–º–º–∞ —É—á–∏—Ç—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏–≤–Ω–æ—Å—Ç–∏ –ø–æ –¥–Ω—è–º –Ω–µ–¥–µ–ª–∏</li>
                        </ul>
                        
                        <p><strong>–£—Å—Ç–∞–ª–æ—Å—Ç—å –∫–æ–º–∞–Ω–¥ (–ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ò–ô –ü–û–ò–°–ö):</strong></p>
                        <ul>
                            <li>–ü—Ä–æ–≥—Ä–∞–º–º–∞ —Å–∞–º–∞ –ø—Ä–æ—Å–∫–∞–Ω–∏—Ä—É–µ—Ç –≤—Å–µ 4 –≤–∞—Ä–∏–∞–Ω—Ç–∞ —É—Å—Ç–∞–ª–æ—Å—Ç–∏:
                                <ul>
                                    <li>–û—Ç–¥–æ—Ö–Ω—É–≤—à–∏–µ (+2 –¥–Ω—è –æ—Ç–¥—ã—Ö–∞)</li>
                                    <li>–ù–æ—Ä–º–∞–ª—å–Ω—ã–π –æ—Ç–¥—ã—Ö (+1 –¥–µ–Ω—å)</li>
                                    <li>Back-to-back (2 –∏–≥—Ä—ã –ø–æ–¥—Ä—è–¥)</li>
                                    <li>3 –∏–≥—Ä—ã –∑–∞ 4 –¥–Ω—è</li>
                                </ul>
                            </li>
                            <li>–ü–æ—Å–ª–µ –∞–Ω–∞–ª–∏–∑–∞ –ø—Ä–æ–≥—Ä–∞–º–º–∞ –≤—ã–±–µ—Ä–µ—Ç –≤–∞—Ä–∏–∞–Ω—Ç —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–µ–º –º–µ–∂–¥—É –ø—Ä–æ–≥–Ω–æ–∑–æ–º —Å—á–µ—Ç–∞ –∏ –æ–∂–∏–¥–∞–µ–º—ã–º —Ç–æ—Ç–∞–ª–æ–º</li>
                            <li>–û–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç –±—É–¥–µ—Ç –≤—ã–¥–µ–ª–µ–Ω –∑–µ–ª–µ–Ω—ã–º —Ü–≤–µ—Ç–æ–º —Å –≥–∞–ª–æ—á–∫–æ–π</li>
                        </ul>
                        
                        <p><strong>–ü–æ–ª –∫–æ–º–∞–Ω–¥:</strong></p>
                        <ul>
                            <li>–ú—É–∂—á–∏–Ω—ã, –∂–µ–Ω—â–∏–Ω—ã –∏–ª–∏ —Å–º–µ—à–∞–Ω–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã</li>
                        </ul>
                        
                        <h4>3. –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö</h4>
                        <p><strong>–°–ø–æ—Å–æ–± 1: –°–∫—Ä–∏–Ω—à–æ—Ç (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)</strong></p>
                        <ul>
                            <li>–ù–∞–∂–º–∏—Ç–µ "–í—ã–±—Ä–∞—Ç—å —Ñ–∞–π–ª" –≤ –æ–±–ª–∞—Å—Ç–∏ –∑–∞–≥—Ä—É–∑–∫–∏</li>
                            <li>–ò–ª–∏ –ø–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —Å–∫—Ä–∏–Ω—à–æ—Ç –º–∞—Ç—á–∞ –≤ –≤—ã–¥–µ–ª–µ–Ω–Ω—É—é –æ–±–ª–∞—Å—Ç—å</li>
                            <li>–ü—Ä–æ–≥—Ä–∞–º–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞—Å–ø–æ–∑–Ω–∞–µ—Ç:
                                <ul>
                                    <li>–°—á–µ—Ç –ø–æ —á–µ—Ç–≤–µ—Ä—Ç—è–º</li>
                                    <li>–¢–µ–∫—É—â–∏–π –ø–µ—Ä–∏–æ–¥</li>
                                    <li>–û—Å—Ç–∞–≤—à–µ–µ—Å—è –≤—Ä–µ–º—è</li>
                                    <li>–¢–æ—Ç–∞–ª –∏ —Ç–∏–ø —Å—Ç–∞–≤–∫–∏</li>
                                    <li>–§–æ—Ä—É</li>
                                </ul>
                            </li>
                        </ul>
                        
                        <p><strong>–°–ø–æ—Å–æ–± 2: –†—É—á–Ω–æ–π –≤–≤–æ–¥</strong></p>
                        <ul>
                            <li>–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–ª—è –≤ —Ä–∞–∑–¥–µ–ª–µ "–ò–ª–∏ –≤–≤–µ–¥–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –≤—Ä—É—á–Ω—É—é":
                                <ul>
                                    <li>–°—á–µ—Ç (—Ñ–æ—Ä–º–∞—Ç: 100:92)</li>
                                    <li>–ü–µ—Ä–∏–æ–¥ (1-4)</li>
                                    <li>–í—Ä–µ–º—è (—Ñ–æ—Ä–º–∞—Ç: 01:27)</li>
                                    <li>–¢–æ—Ç–∞–ª (–Ω–∞–ø—Ä–∏–º–µ—Ä: 237.5)</li>
                                    <li>–¢–∏–ø —Ç–æ—Ç–∞–ª–∞ (–¢–ë/–¢–ú)</li>
                                    <li>–§–æ—Ä–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: -6.5)</li>
                                </ul>
                            </li>
                        </ul>
                        
                        <h4>4. –ü—Ä–æ—Å–º–æ—Ç—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤</h4>
                        <p><strong>–í–∫–ª–∞–¥–∫–∞ "–†–µ–∑—É–ª—å—Ç–∞—Ç—ã"</strong></p>
                        <ul>
                            <li>–ü—Ä–æ–≥–Ω–æ–∑ —Ç–æ—Ç–∞–ª–∞ –Ω–∞ –æ—Å—Ç–∞–≤—à—É—é—Å—è —á–∞—Å—Ç—å –º–∞—Ç—á–∞</li>
                            <li>–¢–µ–º–ø –∏–≥—Ä—ã</li>
                            <li>–ü—Ä–æ–≥–Ω–æ–∑ –∏—Ç–æ–≥–æ–≤–æ–≥–æ —Å—á–µ—Ç–∞</li>
                            <li><strong>–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø—Ä–æ–≥–Ω–æ–∑–æ–≤</strong> - –∞–Ω–∞–ª–∏–∑ —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏—è –º–µ–∂–¥—É –ø—Ä–æ–≥–Ω–æ–∑–æ–º —Å—á–µ—Ç–∞ –∏ –æ–∂–∏–¥–∞–µ–º—ã–º —Ç–æ—Ç–∞–ª–æ–º</li>
                            <li><strong>–ò–Ω–¥–∏–∫–∞—Ç–æ—Ä Joker/Banana</strong> - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–æ—á–Ω–æ—Å—Ç—å –ø—Ä–æ–≥–Ω–æ–∑–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏—è</li>
                            <li><strong>–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ —É—Å—Ç–∞–ª–æ—Å—Ç–∏</strong> - —Ç–∞–±–ª–∏—Ü–∞ —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –≤—Å–µ—Ö 4 –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤</li>
                            <li>–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è –ø–æ —Å—Ç–∞–≤–∫–µ —Å —É–∫–∞–∑–∞–Ω–∏–µ–º —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏</li>
                        </ul>
                        
                        <p><strong>–í–∫–ª–∞–¥–∫–∞ "–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞"</strong></p>
                        <ul>
                            <li>–¢–µ–∫—É—â–∏–π —Ç–µ–º–ø –∏–≥—Ä—ã</li>
                            <li>–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å–æ —Å—Ä–µ–¥–Ω–∏–º —Ç–µ–º–ø–æ–º –ª–∏–≥–∏</li>
                            <li>–ü—Ä–æ–≥—Ä–µ—Å—Å –º–∞—Ç—á–∞</li>
                            <li>–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∞—Ç–∞–∫–∏</li>
                            <li>PPG –∫–æ–º–∞–Ω–¥</li>
                        </ul>
                        
                        <p><strong>–í–∫–ª–∞–¥–∫–∞ "–ü—Ä–æ–≥–Ω–æ–∑ –ø–æ —á–µ—Ç–≤–µ—Ä—Ç—è–º"</strong></p>
                        <ul>
                            <li>–ü—Ä–æ–≥–Ω–æ–∑ –æ—á–∫–æ–≤ –≤–æ 2-–π –∏ 3-–π —á–µ—Ç–≤–µ—Ä—Ç—è—Ö</li>
                            <li>–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Å—Ç–∞–≤–∫–∞–º –Ω–∞ —á–µ—Ç–≤–µ—Ä—Ç–∏</li>
                            <li>–£—á–µ—Ç –ª—É–Ω–Ω–æ–π —Ñ–∞–∑—ã –∏ –¥—Ä—É–≥–∏—Ö —Ñ–∞–∫—Ç–æ—Ä–æ–≤</li>
                        </ul>
                        
                        <p><strong>–í–∫–ª–∞–¥–∫–∞ "–§–∞–∫—Ç–æ—Ä—ã –≤–ª–∏—è–Ω–∏—è"</strong></p>
                        <ul>
                            <li>–î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –≤–ª–∏—è–Ω–∏—è –¥–Ω—è –Ω–µ–¥–µ–ª–∏</li>
                            <li>–£—á–µ—Ç —É—Å—Ç–∞–ª–æ—Å—Ç–∏ –∫–æ–º–∞–Ω–¥</li>
                            <li>–í–ª–∏—è–Ω–∏–µ –ø–æ–ª–∞ –∏–≥—Ä–æ–∫–æ–≤</li>
                            <li>–õ—É–Ω–Ω—ã–π –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç</li>
                            <li>–°—É–º–º–∞—Ä–Ω–æ–µ –≤–ª–∏—è–Ω–∏–µ –Ω–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏–≤–Ω–æ—Å—Ç—å</li>
                        </ul>
                    </div>
                    
                    <div class="instruction-section">
                        <h3>üîç –°–æ–≤–µ—Ç—ã –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é</h3>
                        
                        <div class="instruction-tip">
                            <p><strong>–î–ª—è –ª—É—á—à–µ–≥–æ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è —Å–∫—Ä–∏–Ω—à–æ—Ç–æ–≤:</strong></p>
                            <ul>
                                <li>–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —á–µ—Ç–∫–∏–µ —Å–∫—Ä–∏–Ω—à–æ—Ç—ã —Å —Ö–æ—Ä–æ—à–∏–º –∫–æ–Ω—Ç—Ä–∞—Å—Ç–æ–º</li>
                                <li>–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ç–µ–∫—Å—Ç —Ö–æ—Ä–æ—à–æ —á–∏—Ç–∞–µ–º</li>
                                <li>–ñ–µ–ª–∞—Ç–µ–ª—å–Ω–æ, —á—Ç–æ–±—ã –Ω–∞ —Å–∫—Ä–∏–Ω—à–æ—Ç–µ –±—ã–ª–∏ –≤–∏–¥–Ω—ã:
                                    <ul>
                                        <li>–°—á–µ—Ç –ø–æ —á–µ—Ç–≤–µ—Ä—Ç—è–º</li>
                                        <li>–¢–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è –º–∞—Ç—á–∞</li>
                                        <li>–¢–æ—Ç–∞–ª –∏ —Ñ–æ—Ä–∞</li>
                                    </ul>
                                </li>
                            </ul>
                        </div>
                        
                        <div class="instruction-tip">
                            <p><strong>–ü—Ä–∏ —Ä—É—á–Ω–æ–º –≤–≤–æ–¥–µ:</strong></p>
                            <ul>
                                <li>–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–∞—Å—Ç–æ–º–Ω—É—é –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É –¥–ª—è –≤–≤–æ–¥–∞ –¥–∞–Ω–Ω—ã—Ö</li>
                                <li>–°–ª–µ–¥–∏—Ç–µ –∑–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º —Ñ–æ—Ä–º–∞—Ç–æ–º:
                                    <ul>
                                        <li>–°—á–µ—Ç: 100:92</li>
                                        <li>–í—Ä–µ–º—è: 05:30</li>
                                        <li>–¢–æ—Ç–∞–ª: 215.5</li>
                                        <li>–§–æ—Ä–∞: -4.5</li>
                                    </ul>
                                </li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="instruction-section">
                        <h3>üìä –ö–∞–∫ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã</h3>
                        
                        <p><strong>–ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã —Ç–æ—á–Ω–æ—Å—Ç–∏ –ø—Ä–æ–≥–Ω–æ–∑–∞:</strong></p>
                        <ul>
                            <li>üÉè <strong>JOKER</strong> - –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–µ (0-1 –æ—á–∫–æ) –º–µ–∂–¥—É –ø—Ä–æ–≥–Ω–æ–∑–æ–º —Å—á–µ—Ç–∞ –∏ –æ–∂–∏–¥–∞–µ–º—ã–º —Ç–æ—Ç–∞–ª–æ–º. –í—ã—Å–æ–∫–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å –ø—Ä–æ–≥–Ω–æ–∑–∞.</li>
                            <li>üçå <strong>BANANA</strong> - –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–µ —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–µ (2 –æ—á–∫–∞ –∏ –±–æ–ª–µ–µ). –ù–∏–∑–∫–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å –ø—Ä–æ–≥–Ω–æ–∑–∞.</li>
                        </ul>
                        
                        <p><strong>–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫ —É—Å—Ç–∞–ª–æ—Å—Ç–∏:</strong></p>
                        <ul>
                            <li>–ü—Ä–æ–≥—Ä–∞–º–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –≤—Å–µ 4 –≤–∞—Ä–∏–∞–Ω—Ç–∞ —É—Å—Ç–∞–ª–æ—Å—Ç–∏ –∫–æ–º–∞–Ω–¥</li>
                            <li>–í—ã–±–∏—Ä–∞–µ—Ç—Å—è –≤–∞—Ä–∏–∞–Ω—Ç —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–µ–º –º–µ–∂–¥—É –ø—Ä–æ–≥–Ω–æ–∑–æ–º —Å—á–µ—Ç–∞ –∏ —Ç–æ—Ç–∞–ª–æ–º</li>
                            <li>–û–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç –≤—ã–¥–µ–ª—è–µ—Ç—Å—è –∑–µ–ª–µ–Ω—ã–º —Ü–≤–µ—Ç–æ–º —Å –≥–∞–ª–æ—á–∫–æ–π</li>
                            <li>–í —Ç–∞–±–ª–∏—Ü–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –º–æ–∂–Ω–æ —É–≤–∏–¥–µ—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤—Å–µ—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤</li>
                        </ul>
                        
                        <p><strong>–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Å—Ç–∞–≤–∫–∞–º:</strong></p>
                        <ul>
                            <li>üü¢ –ó–ï–õ–ï–ù–´–ô –±–ª–æ–∫ - —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è —Å—Ç–∞–≤–∫–∞</li>
                            <li>–ü—Ä–æ—Ü–µ–Ω—Ç —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏</li>
                            <li>–£—á–∏—Ç—ã–≤–∞–π—Ç–µ –≤—Å–µ —Ñ–∞–∫—Ç–æ—Ä—ã –≤–ª–∏—è–Ω–∏—è –ø–µ—Ä–µ–¥ –ø—Ä–∏–Ω—è—Ç–∏–µ–º —Ä–µ—à–µ–Ω–∏—è</li>
                        </ul>
                        
                        <p><strong>–í–∞–∂–Ω—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏:</strong></p>
                        <ul>
                            <li>–¢–µ–º–ø –∏–≥—Ä—ã > 2.0 - –≤—ã—Å–æ–∫–∞—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏–≤–Ω–æ—Å—Ç—å</li>
                            <li>–¢–µ–º–ø –∏–≥—Ä—ã < 1.5 - –Ω–∏–∑–∫–∞—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏–≤–Ω–æ—Å—Ç—å</li>
                            <li>–í–ª–∏—è–Ω–∏–µ —Ñ–∞–∫—Ç–æ—Ä–æ–≤ > +3% - –ø–æ–≤—ã—à–µ–Ω–Ω–∞—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏–≤–Ω–æ—Å—Ç—å –æ–∂–∏–¥–∞–µ—Ç—Å—è</li>
                            <li>–í–ª–∏—è–Ω–∏–µ —Ñ–∞–∫—Ç–æ—Ä–æ–≤ < -3% - –ø–æ–Ω–∏–∂–µ–Ω–Ω–∞—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏–≤–Ω–æ—Å—Ç—å –æ–∂–∏–¥–∞–µ—Ç—Å—è</li>
                        </ul>
                    </div>
                    
                    <div class="instruction-section">
                        <h3>‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –ø—Ä–∏–º–µ—á–∞–Ω–∏—è</h3>
                        
                        <div class="instruction-warning">
                            <ul>
                                <li>–ü—Ä–æ–≥—Ä–∞–º–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –º–æ–¥–µ–ª–∏ –∏ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ</li>
                                <li>–í—Å–µ —Ä–∞—Å—á–µ—Ç—ã –Ω–æ—Å—è—Ç —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ç–µ–ª—å–Ω—ã–π —Ö–∞—Ä–∞–∫—Ç–µ—Ä</li>
                                <li>–£—á–∏—Ç—ã–≤–∞–π—Ç–µ —Ç–µ–∫—É—â—É—é —Ñ–æ—Ä–º—É –∫–æ–º–∞–Ω–¥, —Ç—Ä–∞–≤–º—ã –∏ –¥—Ä—É–≥–∏–µ —Ñ–∞–∫—Ç–æ—Ä—ã</li>
                                <li>–î–µ–ª–∞–π—Ç–µ —Å—Ç–∞–≤–∫–∏ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="instruction-section">
                        <h3>üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö</h3>
                        
                        <p>–ü—Ä–æ–≥—Ä–∞–º–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:</p>
                        <ul>
                            <li>–†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç –ª—É–Ω–Ω—ã–µ —Ñ–∞–∑—ã</li>
                            <li>–û–±–Ω–æ–≤–ª—è–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ –¥–Ω—è–º –Ω–µ–¥–µ–ª–∏</li>
                            <li>–£—á–∏—Ç—ã–≤–∞–µ—Ç –≤—ã–±—Ä–∞–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ª–∏–≥–∏</li>
                            <li>–°–∫–∞–Ω–∏—Ä—É–µ—Ç –≤—Å–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã —É—Å—Ç–∞–ª–æ—Å—Ç–∏ –∫–æ–º–∞–Ω–¥ –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∞–Ω–∞–ª–∏–∑–µ</li>
                            <li>–í—ã–±–∏—Ä–∞–µ—Ç –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–µ–º</li>
                        </ul>
                        
                        <p>–î–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∞–Ω–∞–ª–∏–∑–∞ –ø—Ä–æ—Å—Ç–æ –∏–∑–º–µ–Ω–∏—Ç–µ –ª—é–±–æ–π –ø–∞—Ä–∞–º–µ—Ç—Ä –∏–ª–∏ –∑–∞–≥—Ä—É–∑–∏—Ç–µ –Ω–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ.</p>
                    </div>
                    
                    <div class="instruction-success">
                        <p><strong>–£–¥–∞—á–∏ –≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä–∞ —Å—Ç–∞–≤–æ–∫ TT PRO v4.0! üèÄ</strong></p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Custom Keyboard -->
    <div class="custom-keyboard" id="custom-keyboard">
        <div class="keyboard-grid">
            <button class="keyboard-key" data-value="1">1</button>
            <button class="keyboard-key" data-value="2">2</button>
            <button class="keyboard-key" data-value="3">3</button>
            <button class="keyboard-key keyboard-action" data-action="backspace">‚å´</button>
            <button class="keyboard-key" data-value="4">4</button>
            <button class="keyboard-key" data-value="5">5</button>
            <button class="keyboard-key" data-value="6">6</button>
            <button class="keyboard-key" data-value=":">:</button>
            <button class="keyboard-key" data-value="7">7</button>
            <button class="keyboard-key" data-value="8">8</button>
            <button class="keyboard-key" data-value="9">9</button>
            <button class="keyboard-key" data-value=".">.</button>
            <button class="keyboard-key" data-value="0">0</button>
            <button class="keyboard-key" data-value="-">-</button>
            <button class="keyboard-key" data-value="+">+</button>
            <button class="keyboard-key keyboard-key-wide keyboard-action" data-action="close">–ì–æ—Ç–æ–≤–æ</button>
        </div>
    </div>

    <!-- Scanning Overlay -->
    <div class="scanning-overlay" id="scanning-overlay">
        <div class="scanning-content">
            <div class="scanning-title">üîç –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ —É—Å—Ç–∞–ª–æ—Å—Ç–∏</div>
            <div class="scanning-text" id="scanning-text">–ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º –≤—Å–µ 4 –≤–∞—Ä–∏–∞–Ω—Ç–∞ —É—Å—Ç–∞–ª–æ—Å—Ç–∏ –∫–æ–º–∞–Ω–¥...</div>
            
            <div class="scanning-progress">
                <div class="scanning-progress-bar" id="scanning-progress-bar"></div>
            </div>
            
            <div class="scanning-steps" id="scanning-steps">
                <!-- –ó–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const uploadArea = document.getElementById('upload-area');
            const fileInput = document.getElementById('screenshot-input');
            const uploadBtn = document.getElementById('upload-btn');
            const previewImg = document.getElementById('screenshot-preview');
            const leagueSelect = document.getElementById('league-select');
            const debugInfo = document.getElementById('debug-info');
            const debugText = document.getElementById('debug-text');
            const manualSubmit = document.getElementById('manual-submit');
            const clearBtn = document.getElementById('clear-btn');
            const themeToggle = document.getElementById('theme-toggle');
            const customKeyboard = document.getElementById('custom-keyboard');
            const manualInputs = document.querySelectorAll('.input-field');
            const tabs = document.querySelectorAll('.tab');
            const tabContents = document.querySelectorAll('.tab-content');
            const totalTypeSelect = document.getElementById('manual-total-type');
            const progressBar = document.getElementById('progress-bar');
            const progressFill = document.getElementById('progress-fill');
            const statusMessage = document.getElementById('status-message');
            const genderOptions = document.querySelectorAll('.gender-option');
            const moonIcon = document.getElementById('moon-icon');
            const moonText = document.getElementById('moon-text');
            const moonImpactIcon = document.getElementById('moon-impact-icon');
            const moonImpactText = document.getElementById('moon-impact-text');
            const scanningOverlay = document.getElementById('scanning-overlay');
            const scanningProgressBar = document.getElementById('scanning-progress-bar');
            const scanningText = document.getElementById('scanning-text');
            const scanningSteps = document.getElementById('scanning-steps');
            const fatigueDisplay = document.getElementById('fatigue-display');
            const optimalResult = document.getElementById('optimal-result');
            const optimalDetails = document.getElementById('optimal-details');
            const fatigueComparison = document.getElementById('fatigue-comparison');
            const fatigueComparisonBody = document.getElementById('fatigue-comparison-body');
            
            // –ù–û–í–´–ï –ü–ï–†–ï–ú–ï–ù–ù–´–ï: –î–Ω–∏ –Ω–µ–¥–µ–ª–∏ –∏ —É—Å—Ç–∞–ª–æ—Å—Ç—å
            const dayOptions = document.querySelectorAll('.day-option');
            const fatigueOptionsDisplay = fatigueDisplay.querySelectorAll('.fatigue-option');
            const dayInfo = document.getElementById('day-info');
            const dayImpactContainer = document.getElementById('day-impact-container');
            
            // –≠–ª–µ–º–µ–Ω—Ç—ã –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å—á–µ—Ç–∞ –ø–æ —á–µ—Ç–≤–µ—Ä—Ç—è–º
            const team1Name = document.getElementById('team1-name');
            const team2Name = document.getElementById('team2-name');
            const team1Q1 = document.getElementById('team1-q1');
            const team1Q2 = document.getElementById('team1-q2');
            const team1Q3 = document.getElementById('team1-q3');
            const team1Q4 = document.getElementById('team1-q4');
            const team1Total = document.getElementById('team1-total');
            const team2Q1 = document.getElementById('team2-q1');
            const team2Q2 = document.getElementById('team2-q2');
            const team2Q3 = document.getElementById('team2-q3');
            const team2Q4 = document.getElementById('team2-q4');
            const team2Total = document.getElementById('team2-total');
            const team1StatsName = document.getElementById('team1-stats-name');
            const team2StatsName = document.getElementById('team2-stats-name');
            
            // –≠–ª–µ–º–µ–Ω—Ç—ã –¥–ª—è –ø—Ä–æ–≥–Ω–æ–∑–∞ –ø–æ —á–µ—Ç–≤–µ—Ä—Ç—è–º
            const q2Prediction = document.getElementById('q2-prediction');
            const q3Prediction = document.getElementById('q3-prediction');
            const q2Details = document.getElementById('q2-details');
            const q3Details = document.getElementById('q3-details');
            const genderImpact = document.getElementById('gender-impact');
            const q2Historical = document.getElementById('q2-historical');
            const q3Historical = document.getElementById('q3-historical');
            const moonCoefficient = document.getElementById('moon-coefficient');
            const quartersRecommendation = document.getElementById('quarters-recommendation');
            const quartersConfidenceBar = document.getElementById('quarters-confidence-bar');
            const quartersConfidenceValue = document.getElementById('quarters-confidence-value');
            
            // –ù–û–í–´–ï –≠–õ–ï–ú–ï–ù–¢–´: –§–∞–∫—Ç–æ—Ä—ã –≤–ª–∏—è–Ω–∏—è
            const dayFactorValue = document.getElementById('day-factor-value');
            const fatigueFactorValue = document.getElementById('fatigue-factor-value');
            const genderFactorValue = document.getElementById('gender-factor-value');
            const moonFactorValue = document.getElementById('moon-factor-value');
            const totalFactorValue = document.getElementById('total-factor-value');
            const factorsAnalysis = document.getElementById('factors-analysis');
            const factorsConfidenceBar = document.getElementById('factors-confidence-bar');
            const factorsConfidenceValue = document.getElementById('factors-confidence-value');
            
            // –ù–û–í–´–ï –≠–õ–ï–ú–ï–ù–¢–´: –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø—Ä–æ–≥–Ω–æ–∑–æ–≤
            const predictionAccuracy = document.getElementById('prediction-accuracy');
            const comparisonContainer = document.getElementById('comparison-container');
            const scorePredictionValue = document.getElementById('score-prediction-value');
            const totalPredictionValue = document.getElementById('total-prediction-value');
            const predictionDifference = document.getElementById('prediction-difference');
            const accuracyIndicator = document.getElementById('accuracy-indicator');
            const indicatorIcon = document.getElementById('indicator-icon');
            const indicatorText = document.getElementById('indicator-text');
            const accuracyDetails = document.getElementById('accuracy-details');
            const indicatorExplanation = document.getElementById('indicator-explanation');
            const explanationText = document.getElementById('explanation-text');
            
            let activeInput = null;
            let isDarkTheme = localStorage.getItem('darkTheme') === 'true';
            let totalType = 'over';
            let teamNames = ['–ö–æ–º–∞–Ω–¥–∞ 1', '–ö–æ–º–∞–Ω–¥–∞ 2'];
            let currentGender = 'male';
            let moonPhase = '';
            let moonFactor = 1.0;
            
            // –ù–û–í–´–ï –ü–ï–†–ï–ú–ï–ù–ù–´–ï: –î–Ω–∏ –Ω–µ–¥–µ–ª–∏ –∏ —É—Å—Ç–∞–ª–æ—Å—Ç—å
            let currentDay = 5; // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø—è—Ç–Ω–∏—Ü–∞
            let currentFatigue = 'rested'; // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –æ—Ç–¥–æ—Ö–Ω—É–≤—à–∏–µ
            let optimalFatigue = null; // –û–ø—Ç–∏–º–∞–ª—å–Ω–∞—è —É—Å—Ç–∞–ª–æ—Å—Ç—å –ø–æ—Å–ª–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
            let fatigueScanResults = []; // –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –≤—Å–µ—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤
            
            // –ë–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö —Ç–µ–º–ø–æ–≤ –∏–≥—Ä—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –ª–∏–≥
            const leaguePaceData = {
                '12_4': 2.15, // NBA
                '10_4': 1.65, // –§–ò–ë–ê
                '12_4_3x3': 1.8, // 3√ó3 (4√ó12 –º–∏–Ω)
                '10_4_3x3': 1.5, // 3√ó3 (4√ó10 –º–∏–Ω)
                '10_2_4x4': 1.7, // 4√ó4 (2√ó10 –º–∏–Ω)
                '5_4_cyber': 2.0  // –ö–∏–±–µ—Ä–±–∞—Å–∫–µ—Ç–±–æ–ª
            };
            
            // –ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –ø–æ —á–µ—Ç–≤–µ—Ä—Ç—è–º –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –ª–∏–≥ (–æ—á–∫–æ–≤ –∑–∞ —á–µ—Ç–≤–µ—Ä—Ç—å)
            const quarterPaceData = {
                '12_4': { q1: 55, q2: 58, q3: 54, q4: 56 }, // NBA
                '10_4': { q1: 42, q2: 44, q3: 41, q4: 43 }, // –§–ò–ë–ê
                '12_4_3x3': { q1: 48, q2: 50, q3: 47, q4: 49 }, // 3√ó3 (4√ó12 –º–∏–Ω)
                '10_4_3x3': { q1: 40, q2: 42, q3: 39, q4: 41 }, // 3√ó3 (4√ó10 –º–∏–Ω)
                '10_2_4x4': { q1: 45, q2: 47, q3: 44, q4: 46 }, // 4√ó4 (2√ó10 –º–∏–Ω)
                '5_4_cyber': { q1: 25, q2: 26, q3: 24, q4: 25 } // –ö–∏–±–µ—Ä–±–∞—Å–∫–µ—Ç–±–æ–ª
            };
            
            // –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã –≤–ª–∏—è–Ω–∏—è –ø–æ–ª–∞ –Ω–∞ —Ç–µ–º–ø –∏–≥—Ä—ã
            const genderFactors = {
                'male': 1.0,
                'female': 0.85,
                'mixed': 0.92
            };
            
            // –ù–û–í–´–ï –î–ê–ù–ù–´–ï: –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã –¥–Ω–µ–π –Ω–µ–¥–µ–ª–∏ (–Ω–∞ –æ—Å–Ω–æ–≤–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ NBA)
            const dayFactors = {
                1: { factor: 0.99, name: "–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫", desc: "–ù–∞—á–∞–ª–æ –Ω–µ–¥–µ–ª–∏: —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏–≤–Ω–æ—Å—Ç—å", effect: "-1.0%" },
                2: { factor: 0.98, name: "–í—Ç–æ—Ä–Ω–∏–∫", desc: "–ë—É–¥–Ω–∏–π –¥–µ–Ω—å: –Ω–µ–º–Ω–æ–≥–æ —Å–Ω–∏–∂–µ–Ω–Ω–∞—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏–≤–Ω–æ—Å—Ç—å", effect: "-2.0%" },
                3: { factor: 1.00, name: "–°—Ä–µ–¥–∞", desc: "–°–µ—Ä–µ–¥–∏–Ω–∞ –Ω–µ–¥–µ–ª–∏: —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏–≤–Ω–æ—Å—Ç—å", effect: "¬±0.0%" },
                4: { factor: 0.99, name: "–ß–µ—Ç–≤–µ—Ä–≥", desc: "–ü—Ä–µ–¥–ø—è—Ç–Ω–∏—á–Ω—ã–π –¥–µ–Ω—å: —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏–≤–Ω–æ—Å—Ç—å", effect: "-1.0%" },
                5: { factor: 1.042, name: "–ü—è—Ç–Ω–∏—Ü–∞", desc: "–ö–æ–Ω–µ—Ü –Ω–µ–¥–µ–ª–∏: –ø–æ–≤—ã—à–µ–Ω–Ω–∞—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏–≤–Ω–æ—Å—Ç—å", effect: "+4.2%" },
                6: { factor: 1.025, name: "–°—É–±–±–æ—Ç–∞", desc: "–í—ã—Ö–æ–¥–Ω–æ–π: –≤—ã—Å–æ–∫–∞—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏–≤–Ω–æ—Å—Ç—å", effect: "+2.5%" },
                0: { factor: 1.035, name: "–í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ", desc: "–¢–µ–ª–µ–≤–∏–∑–∏–æ–Ω–Ω—ã–π –¥–µ–Ω—å: –≤—ã—Å–æ–∫–∞—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏–≤–Ω–æ—Å—Ç—å", effect: "+3.5%" }
            };
            
            // –ù–û–í–´–ï –î–ê–ù–ù–´–ï: –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã —É—Å—Ç–∞–ª–æ—Å—Ç–∏ –∫–æ–º–∞–Ω–¥
            const fatigueFactors = {
                'rested': { factor: 1.02, name: "–û—Ç–¥–æ—Ö–Ω—É–≤—à–∏–µ", desc: "2+ –¥–Ω—è –æ—Ç–¥—ã—Ö–∞: –ø–æ–≤—ã—à–µ–Ω–Ω–∞—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏–≤–Ω–æ—Å—Ç—å", effect: "+2.0%" },
                'normal': { factor: 1.00, name: "–ù–æ—Ä–º–∞–ª—å–Ω—ã–π –æ—Ç–¥—ã—Ö", desc: "1 –¥–µ–Ω—å –æ—Ç–¥—ã—Ö–∞: —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏–≤–Ω–æ—Å—Ç—å", effect: "¬±0.0%" },
                'tired': { factor: 0.943, name: "Back-to-back", desc: "2 –∏–≥—Ä—ã –ø–æ–¥—Ä—è–¥: —Å–Ω–∏–∂–µ–Ω–Ω–∞—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏–≤–Ω–æ—Å—Ç—å", effect: "-5.7%" },
                'exhausted': { factor: 0.917, name: "3 –∏–≥—Ä—ã –∑–∞ 4 –¥–Ω—è", desc: "–í—ã—Å–æ–∫–∞—è —É—Å—Ç–∞–ª–æ—Å—Ç—å: —Å–∏–ª—å–Ω–æ —Å–Ω–∏–∂–µ–Ω–Ω–∞—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏–≤–Ω–æ—Å—Ç—å", effect: "-8.3%" }
            };
            
            // Apply saved theme
            if (isDarkTheme) {
                document.body.setAttribute('data-theme', 'dark');
                themeToggle.textContent = '‚òÄÔ∏è';
            }
            
            // Calculate moon phase
            calculateMoonPhase();
            
            // Set up day of week selection
            dayOptions.forEach(option => {
                option.addEventListener('click', function() {
                    dayOptions.forEach(opt => opt.classList.remove('active'));
                    this.classList.add('active');
                    currentDay = parseInt(this.getAttribute('data-day'));
                    updateDayInfo();
                    // Recalculate predictions if we have data
                    if (document.getElementById('manual-score').value) {
                        processManualInput();
                    }
                });
            });
            
            // Update day info display
            function updateDayInfo() {
                const dayData = dayFactors[currentDay];
                dayInfo.innerHTML = `<i class="fas fa-info-circle"></i><span>${dayData.name}: ${dayData.desc} <span class="factor-badge ${dayData.effect.includes('+') ? 'positive' : dayData.effect.includes('-') ? 'negative' : 'neutral'}">${dayData.effect}</span></span>`;
            }
            
            // Initialize day info
            updateDayInfo();
            
            // Set up gender selection
            genderOptions.forEach(option => {
                option.addEventListener('click', function() {
                    genderOptions.forEach(opt => opt.classList.remove('active'));
                    this.classList.add('active');
                    currentGender = this.getAttribute('data-gender');
                    // Recalculate predictions if we have data
                    if (document.getElementById('manual-score').value) {
                        processManualInput();
                    }
                });
            });
            
            // Moon phase calculation function
            function calculateMoonPhase() {
                const now = new Date();
                const start = new Date(now.getFullYear(), 0, 0);
                const diff = now - start;
                const oneDay = 1000 * 60 * 60 * 24;
                const dayOfYear = Math.floor(diff / oneDay);
                
                // Simplified moon phase calculation based on day of year
                const moonDay = dayOfYear % 29.53; // Moon cycle is approximately 29.53 days
                
                if (moonDay < 1) {
                    moonPhase = 'new';
                    moonIcon.textContent = 'üåë';
                    moonText.textContent = '–ù–æ–≤–æ–ª—É–Ω–∏–µ';
                    moonImpactIcon.textContent = 'üåë';
                    moonImpactText.textContent = '–ù–æ–≤–æ–ª—É–Ω–∏–µ: –Ω–∏–∑–∫–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å';
                    moonFactor = 0.95;
                } else if (moonDay < 7.5) {
                    moonPhase = 'waxing';
                    moonIcon.textContent = 'üåí';
                    moonText.textContent = '–†–∞—Å—Ç—É—â–∞—è –ª—É–Ω–∞';
                    moonImpactIcon.textContent = 'üåí';
                    moonImpactText.textContent = '–†–∞—Å—Ç—É—â–∞—è –ª—É–Ω–∞: –≤–æ–∑—Ä–∞—Å—Ç–∞—é—â–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å';
                    moonFactor = 1.02;
                } else if (moonDay < 15) {
                    moonPhase = 'full';
                    moonIcon.textContent = 'üåï';
                    moonText.textContent = '–ü–æ–ª–Ω–æ–ª—É–Ω–∏–µ';
                    moonImpactIcon.textContent = 'üåï';
                    moonImpactText.textContent = '–ü–æ–ª–Ω–æ–ª—É–Ω–∏–µ: –ø–∏–∫–æ–≤–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å';
                    moonFactor = 1.08;
                } else if (moonDay < 22.5) {
                    moonPhase = 'waning';
                    moonIcon.textContent = 'üåñ';
                    moonText.textContent = '–£–±—ã–≤–∞—é—â–∞—è –ª—É–Ω–∞';
                    moonImpactIcon.textContent = 'üåñ';
                    moonImpactText.textContent = '–£–±—ã–≤–∞—é—â–∞—è –ª—É–Ω–∞: —Å–Ω–∏–∂–∞—é—â–∞—è—Å—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å';
                    moonFactor = 1.0;
                } else {
                    moonPhase = 'dark';
                    moonIcon.textContent = 'üåò';
                    moonText.textContent = '–¢–µ–º–Ω–∞—è –ª—É–Ω–∞';
                    moonImpactIcon.textContent = 'üåò';
                    moonImpactText.textContent = '–¢–µ–º–Ω–∞—è –ª—É–Ω–∞: –Ω–µ–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å';
                    moonFactor = 0.98;
                }
                
                moonCoefficient.textContent = moonFactor.toFixed(2);
            }
            
            // Prevent zoom on double tap
            document.addEventListener('dblclick', function(e) {
                e.preventDefault();
            }, { passive: false });
            
            // Prevent zoom on iOS
            document.addEventListener('touchstart', function(e) {
                if (e.touches.length > 1) {
                    e.preventDefault();
                }
            }, { passive: false });
            
            // Tab functionality
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    const tabId = tab.getAttribute('data-tab');
                    
                    // Deactivate all tabs
                    tabs.forEach(t => t.classList.remove('active'));
                    tabContents.forEach(tc => tc.classList.remove('active'));
                    
                    // Activate current tab
                    tab.classList.add('active');
                    document.getElementById(`${tabId}-tab`).classList.add('active');
                });
            });
            
            // Update total type when selection changes
            totalTypeSelect.addEventListener('change', function() {
                totalType = this.value;
            });
            
            // Prevent default behavior for input fields to avoid system keyboard
            manualInputs.forEach(input => {
                if (input.id !== 'manual-total-type') {
                    input.addEventListener('focus', (e) => {
                        e.preventDefault();
                        showCustomKeyboard();
                        activeInput = input;
                    });
                    
                    input.addEventListener('click', (e) => {
                        e.preventDefault();
                        showCustomKeyboard();
                        activeInput = input;
                    });
                    
                    // Prevent touch events from triggering system keyboard
                    input.addEventListener('touchstart', (e) => {
                        e.preventDefault();
                        showCustomKeyboard();
                        activeInput = input;
                    });
                }
            });
            
            // Function to show custom keyboard
            function showCustomKeyboard() {
                customKeyboard.classList.add('visible');
                
                // Show/hide special keys based on input type
                const dotKey = document.querySelector('.keyboard-key[data-value="."]');
                const colonKey = document.querySelector('.keyboard-key[data-value=":"]');
                const minusKey = document.querySelector('.keyboard-key[data-value="-"]');
                const plusKey = document.querySelector('.keyboard-key[data-value="+"]');
                
                // Reset all keys visibility
                dotKey.style.display = 'flex';
                colonKey.style.display = 'flex';
                minusKey.style.display = 'flex';
                plusKey.style.display = 'flex';
                
                if (activeInput) {
                    if (activeInput.id === 'manual-total') {
                        // For total input, show only dot
                        colonKey.style.display = 'none';
                        minusKey.style.display = 'none';
                        plusKey.style.display = 'none';
                    } else if (activeInput.id === 'manual-handicap') {
                        // For handicap input, show minus and plus
                        colonKey.style.display = 'none';
                        dotKey.style.display = 'flex'; // Allow decimal points for handicap
                    } else if (activeInput.id === 'manual-score' || activeInput.id === 'manual-time') {
                        // For score and time inputs, show colon
                        dotKey.style.display = 'none';
                        minusKey.style.display = 'none';
                        plusKey.style.display = 'none';
                    }
                }
            }
            
            // Function to hide custom keyboard
            function hideCustomKeyboard() {
                customKeyboard.classList.remove('visible');
                activeInput = null;
            }
            
            // Keyboard button clicks
            document.querySelectorAll('.keyboard-key').forEach(key => {
                key.addEventListener('click', function(e) {
                    e.preventDefault();
                    if (!activeInput) return;
                    
                    const value = this.getAttribute('data-value');
                    const action = this.getAttribute('data-action');
                    
                    if (action === 'backspace') {
                        activeInput.value = activeInput.value.slice(0, -1);
                    } else if (action === 'close') {
                        hideCustomKeyboard();
                    } else if (value) {
                        // Allow only valid input for each field
                        if (activeInput.id === 'manual-total' && value === '.') {
                            // Allow only one decimal point for total
                            if (!activeInput.value.includes('.')) {
                                activeInput.value += value;
                            }
                        } else if (activeInput.id === 'manual-handicap' && (value === '-' || value === '+')) {
                            // Allow minus/plus only at the beginning for handicap
                            if (activeInput.value === '') {
                                activeInput.value += value;
                            }
                        } else if (activeInput.id === 'manual-handicap' && value === '.') {
                            // Allow decimal point for handicap
                            if (!activeInput.value.includes('.')) {
                                activeInput.value += value;
                            }
                        } else if ((activeInput.id === 'manual-score' || activeInput.id === 'manual-time') && value === ':') {
                            // Allow only one colon for score and time
                            if (!activeInput.value.includes(':')) {
                                activeInput.value += value;
                            }
                        } else if (value !== ':' && value !== '-' && value !== '+' && value !== '.') {
                            // Allow numbers in all cases
                            activeInput.value += value;
                        }
                    }
                });
                
                // Prevent double tap zoom on keyboard keys
                key.addEventListener('dblclick', (e) => {
                    e.preventDefault();
                });
            });
            
            // Close keyboard when clicking outside
            document.addEventListener('click', function(e) {
                if (!e.target.closest('.custom-keyboard') && !e.target.closest('.input-field')) {
                    hideCustomKeyboard();
                }
            });
            
            // Clear button functionality
            clearBtn.addEventListener('click', () => {
                manualInputs.forEach(input => {
                    input.value = '';
                });
                totalTypeSelect.value = 'over';
                totalType = 'over';
                
                // –°–±—Ä–æ—Å —Å—á–µ—Ç–∞ –ø–æ —á–µ—Ç–≤–µ—Ä—Ç—è–º
                resetQuarterScores();
                
                // –°–±—Ä–æ—Å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —É—Å—Ç–∞–ª–æ—Å—Ç–∏
                fatigueOptionsDisplay.forEach(option => {
                    option.classList.remove('active', 'optimal');
                });
                optimalResult.style.display = 'none';
                fatigueComparison.style.display = 'none';
                
                document.getElementById('ocr-score').textContent = '--';
                document.getElementById('ocr-period').textContent = '--';
                document.getElementById('ocr-time').textContent = '--';
                document.getElementById('ocr-time-remaining').textContent = '--';
                document.getElementById('ocr-total').textContent = '--';
                document.getElementById('ocr-total-type').textContent = '--';
                document.getElementById('ocr-handicap').textContent = '--';
                
                document.getElementById('predicted-total').textContent = '--';
                document.getElementById('predicted-pace').textContent = '--';
                document.getElementById('predicted-score').textContent = '--';
                
                // –°–±—Ä–æ—Å –±–ª–æ–∫–∞ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –ø—Ä–æ–≥–Ω–æ–∑–æ–≤
                predictionAccuracy.textContent = '--';
                comparisonContainer.style.display = 'none';
                accuracyIndicator.style.display = 'none';
                indicatorExplanation.style.display = 'none';
                
                document.getElementById('recommendation-text').textContent = '–ó–∞–≥—Ä—É–∑–∏—Ç–µ —Å–∫—Ä–∏–Ω—à–æ—Ç –∏–ª–∏ –≤–≤–µ–¥–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ';
                document.getElementById('confidence-bar').style.width = '0%';
                document.getElementById('confidence-value').textContent = '0%';
                
                document.getElementById('current-pace').textContent = '--';
                document.getElementById('league-pace').textContent = '--';
                document.getElementById('match-progress').textContent = '--';
                document.getElementById('offensive-efficiency').textContent = '--';
                document.getElementById('team1-ppg').textContent = '--';
                document.getElementById('team2-ppg').textContent = '--';
                document.getElementById('total-analysis').textContent = '–ó–∞–≥—Ä—É–∑–∏—Ç–µ —Å–∫—Ä–∏–Ω—à–æ—Ç –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞';
                document.getElementById('analysis-confidence-bar').style.width = '0%';
                document.getElementById('analysis-confidence-value').textContent = '0%';
                
                // –°–±—Ä–æ—Å –ø—Ä–æ–≥–Ω–æ–∑–∞ –ø–æ —á–µ—Ç–≤–µ—Ä—Ç—è–º
                q2Prediction.textContent = '--';
                q3Prediction.textContent = '--';
                q2Details.textContent = '–¢–ë/–¢–ú: --';
                q3Details.textContent = '–¢–ë/–¢–ú: --';
                genderImpact.textContent = '--';
                q2Historical.textContent = '--';
                q3Historical.textContent = '--';
                quartersRecommendation.textContent = '–ó–∞–≥—Ä—É–∑–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –ø–æ —Å—Ç–∞–≤–∫–∞–º –Ω–∞ —á–µ—Ç–≤–µ—Ä—Ç–∏';
                quartersConfidenceBar.style.width = '0%';
                quartersConfidenceValue.textContent = '0%';
                
                // –°–±—Ä–æ—Å —Ñ–∞–∫—Ç–æ—Ä–æ–≤ –≤–ª–∏—è–Ω–∏—è
                dayFactorValue.textContent = '--';
                fatigueFactorValue.textContent = '--';
                genderFactorValue.textContent = '--';
                moonFactorValue.textContent = '--';
                totalFactorValue.textContent = '--';
                factorsAnalysis.textContent = '–ó–∞–≥—Ä—É–∑–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Ñ–∞–∫—Ç–æ—Ä–æ–≤ –≤–ª–∏—è–Ω–∏—è';
                factorsConfidenceBar.style.width = '0%';
                factorsConfidenceValue.textContent = '0%';
                dayImpactContainer.innerHTML = '';
                
                previewImg.style.display = 'none';
                progressBar.style.display = 'none';
                statusMessage.innerHTML = '';
            });
            
            // –§—É–Ω–∫—Ü–∏—è —Å–±—Ä–æ—Å–∞ —Å—á–µ—Ç–∞ –ø–æ —á–µ—Ç–≤–µ—Ä—Ç—è–º
            function resetQuarterScores() {
                team1Name.textContent = '–ö–æ–º–∞–Ω–¥–∞ 1';
                team2Name.textContent = '–ö–æ–º–∞–Ω–¥–∞ 2';
                team1StatsName.textContent = '–ö–æ–º–∞–Ω–¥–∞ 1 (PPG)';
                team2StatsName.textContent = '–ö–æ–º–∞–Ω–¥–∞ 2 (PPG)';
                
                team1Q1.textContent = '-';
                team1Q2.textContent = '-';
                team1Q3.textContent = '-';
                team1Q4.textContent = '-';
                team1Total.textContent = '0';
                
                team2Q1.textContent = '-';
                team2Q2.textContent = '-';
                team2Q3.textContent = '-';
                team2Q4.textContent = '-';
                team2Total.textContent = '0';
            }
            
            // Theme toggle functionality
            themeToggle.addEventListener('click', function() {
                isDarkTheme = !isDarkTheme;
                if (isDarkTheme) {
                    document.body.setAttribute('data-theme', 'dark');
                    themeToggle.textContent = '‚òÄÔ∏è';
                } else {
                    document.body.removeAttribute('data-theme');
                    themeToggle.textContent = 'üåô';
                }
                localStorage.setItem('darkTheme', isDarkTheme);
            });
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
            uploadArea.addEventListener('click', () => fileInput.click());
            uploadBtn.addEventListener('click', (e) => {
                e.stopPropagation();
                fileInput.click();
            });
            
            uploadArea.addEventListener('dragover', (e) => {
                e.preventDefault();
                uploadArea.classList.add('drag-over');
            });
            
            uploadArea.addEventListener('dragleave', () => {
                uploadArea.classList.remove('drag-over');
            });
            
            uploadArea.addEventListener('drop', (e) => {
                e.preventDefault();
                uploadArea.classList.remove('drag-over');
                
                if (e.dataTransfer.files.length) {
                    processImage(e.dataTransfer.files[0]);
                }
            });
            
            fileInput.addEventListener('change', () => {
                if (fileInput.files.length) {
                    processImage(fileInput.files[0]);
                }
            });
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è —Ä—É—á–Ω–æ–≥–æ –≤–≤–æ–¥–∞
            manualSubmit.addEventListener('click', () => {
                processManualInput();
            });
            
            function showStatus(message, type) {
                statusMessage.innerHTML = `<div class="status-message status-${type}">${message}</div>`;
            }
            
            function updateProgress(percent) {
                progressBar.style.display = 'block';
                progressFill.style.width = `${percent}%`;
            }
            
            // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –ª–∏–≥–∏
            function getLeagueParams() {
                const leagueValue = leagueSelect.value;
                let periodLength, totalPeriods, overtimeLength;
                
                switch(leagueValue) {
                    case '12_4': // NBA
                        periodLength = 12;
                        totalPeriods = 4;
                        overtimeLength = 5;
                        break;
                    case '10_4': // –§–ò–ë–ê
                        periodLength = 10;
                        totalPeriods = 4;
                        overtimeLength = 5;
                        break;
                    case '12_4_3x3': // 3√ó3 (4√ó12 –º–∏–Ω)
                        periodLength = 12;
                        totalPeriods = 4;
                        overtimeLength = 2;
                        break;
                    case '10_4_3x3': // 3√ó3 (4√ó10 –º–∏–Ω)
                        periodLength = 10;
                        totalPeriods = 4;
                        overtimeLength = 2;
                        break;
                    case '10_2_4x4': // 4√ó4 (2√ó10 –º–∏–Ω)
                        periodLength = 10;
                        totalPeriods = 2;
                        overtimeLength = 3;
                        break;
                    case '5_4_cyber': // –ö–∏–±–µ—Ä–±–∞—Å–∫–µ—Ç–±–æ–ª
                        periodLength = 5;
                        totalPeriods = 4;
                        overtimeLength = 2;
                        break;
                    default:
                        periodLength = 10;
                        totalPeriods = 4;
                        overtimeLength = 5;
                }
                
                return {
                    periodLength,
                    totalPeriods,
                    overtimeLength,
                    leaguePace: leaguePaceData[leagueValue] || 1.7,
                    quarterPace: quarterPaceData[leagueValue] || { q1: 45, q2: 47, q3: 44, q4: 46 }
                };
            }
            
            // –ù–û–í–ê–Ø –§–£–ù–ö–¶–ò–Ø: –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ —É—Å—Ç–∞–ª–æ—Å—Ç–∏
            async function scanAllFatigueOptions(score1, score2, period, timeElapsed, totalLine, handicapLine, totalType) {
                fatigueScanResults = [];
                optimalFatigue = null;
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º overlay —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
                scanningOverlay.style.display = 'flex';
                scanningText.textContent = '–ù–∞—á–∏–Ω–∞–µ–º —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ —É—Å—Ç–∞–ª–æ—Å—Ç–∏...';
                scanningProgressBar.style.width = '0%';
                
                // –°–æ–∑–¥–∞–µ–º —à–∞–≥–∏ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
                scanningSteps.innerHTML = '';
                const fatigueKeys = Object.keys(fatigueFactors);
                
                fatigueKeys.forEach((fatigueKey, index) => {
                    const step = document.createElement('div');
                    step.className = 'scanning-step';
                    step.textContent = fatigueFactors[fatigueKey].name;
                    step.id = `scan-step-${fatigueKey}`;
                    scanningSteps.appendChild(step);
                });
                
                // –°–∫–∞–Ω–∏—Ä—É–µ–º –∫–∞–∂–¥—ã–π –≤–∞—Ä–∏–∞–Ω—Ç
                for (let i = 0; i < fatigueKeys.length; i++) {
                    const fatigueKey = fatigueKeys[i];
                    const stepElement = document.getElementById(`scan-step-${fatigueKey}`);
                    
                    // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å
                    scanningProgressBar.style.width = `${(i / fatigueKeys.length) * 100}%`;
                    scanningText.textContent = `–ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º: ${fatigueFactors[fatigueKey].name}...`;
                    stepElement.classList.add('active');
                    
                    // –ñ–¥–µ–º –Ω–µ–º–Ω–æ–≥–æ –¥–ª—è –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ —ç—Ñ—Ñ–µ–∫—Ç–∞
                    await new Promise(resolve => setTimeout(resolve, 500));
                    
                    // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –ø—Ä–æ–≥–Ω–æ–∑ –¥–ª—è —ç—Ç–æ–≥–æ –≤–∞—Ä–∏–∞–Ω—Ç–∞ —É—Å—Ç–∞–ª–æ—Å—Ç–∏
                    const prediction = calculatePrediction(score1, score2, period, timeElapsed, totalLine, handicapLine, totalType, fatigueKey);
                    
                    // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
                    fatigueScanResults.push({
                        fatigueKey: fatigueKey,
                        fatigueName: fatigueFactors[fatigueKey].name,
                        factor: fatigueFactors[fatigueKey].factor,
                        effect: fatigueFactors[fatigueKey].effect,
                        predictedTotal: Math.round(prediction.predictedTotalPoints),
                        predictedScore: Math.round(prediction.predictedScore1) + Math.round(prediction.predictedScore2),
                        difference: prediction.difference,
                        confidence: prediction.confidence
                    });
                    
                    // –ü–æ–º–µ—á–∞–µ–º —à–∞–≥ –∫–∞–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–π
                    stepElement.classList.remove('active');
                    stepElement.classList.add('completed');
                }
                
                // –ó–∞–≤–µ—Ä—à–∞–µ–º —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
                scanningProgressBar.style.width = '100%';
                scanningText.textContent = '–°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ! –ù–∞—Ö–æ–¥–∏–º –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç...';
                
                // –ñ–¥–µ–º –Ω–µ–º–Ω–æ–≥–æ
                await new Promise(resolve => setTimeout(resolve, 1000));
                
                // –ù–∞—Ö–æ–¥–∏–º –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç (–º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–µ)
                let minDifference = Infinity;
                fatigueScanResults.forEach(result => {
                    if (result.difference < minDifference) {
                        minDifference = result.difference;
                        optimalFatigue = result.fatigueKey;
                    }
                });
                
                // –°–∫—Ä—ã–≤–∞–µ–º overlay
                scanningOverlay.style.display = 'none';
                
                return {
                    optimalFatigue: optimalFatigue,
                    results: fatigueScanResults
                };
            }
            
            // –ù–û–í–ê–Ø –§–£–ù–ö–¶–ò–Ø: –†–∞—Å—á–µ—Ç –ø—Ä–æ–≥–Ω–æ–∑–∞ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —É—Å—Ç–∞–ª–æ—Å—Ç–∏
            function calculatePrediction(score1, score2, period, timeElapsed, totalLine, handicapLine, totalType, fatigueKey) {
                const leagueParams = getLeagueParams();
                const periodLength = leagueParams.periodLength;
                const totalPeriods = leagueParams.totalPeriods;
                const overtimeLength = leagueParams.overtimeLength;
                
                // –ü–∞—Ä—Å–∏–º –ø—Ä–æ—à–µ–¥—à–µ–µ –≤—Ä–µ–º—è –≤ —á–µ—Ç–≤–µ—Ä—Ç–∏
                const [minutesElapsed, secondsElapsed] = timeElapsed.split(':').map(Number);
                const totalSecondsElapsed = minutesElapsed * 60 + secondsElapsed;
                const totalSecondsInPeriod = periodLength * 60;
                
                // –†–∞—Å—á–µ—Ç –ø—Ä–æ—à–µ–¥—à–µ–≥–æ –∏ –æ—Å—Ç–∞–≤—à–µ–≥–æ—Å—è –≤—Ä–µ–º–µ–Ω–∏ –≤ –º–∞—Ç—á–µ
                const totalSecondsPlayed = (period - 1) * totalSecondsInPeriod + totalSecondsElapsed;
                const totalSecondsInGame = totalPeriods * totalSecondsInPeriod;
                const totalSecondsRemainingInGame = totalSecondsInGame - totalSecondsPlayed;
                
                // –†–∞—Å—á–µ—Ç —Ç–µ–∫—É—â–µ–≥–æ —Ç–µ–º–ø–∞ –∏–≥—Ä—ã (–æ—á–∫–æ–≤ –≤ –º–∏–Ω—É—Ç—É)
                const totalPoints = score1 + score2;
                const minutesPlayed = totalSecondsPlayed / 60;
                const pointsPerMinute = minutesPlayed > 0 ? totalPoints / minutesPlayed : 0;
                
                // –ë–∞–∑–æ–≤—ã–π –ø—Ä–æ–≥–Ω–æ–∑ —Ç–æ—Ç–∞–ª–∞ –Ω–∞ –≤—Å—é –∏–≥—Ä—É
                const minutesRemainingInGame = totalSecondsRemainingInGame / 60;
                let predictedTotalPoints = totalPoints + (pointsPerMinute * minutesRemainingInGame);
                
                // –ü–†–ò–ú–ï–ù–Ø–ï–ú –§–ê–ö–¢–û–†–´ –í–õ–ò–Ø–ù–ò–Ø
                const dayData = dayFactors[currentDay];
                const fatigueData = fatigueFactors[fatigueKey];
                const genderFactor = genderFactors[currentGender];
                
                // –û–±—â–∏–π –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –≤–ª–∏—è–Ω–∏—è
                const totalInfluenceFactor = dayData.factor * fatigueData.factor * genderFactor * moonFactor;
                
                // –ü—Ä–∏–º–µ–Ω—è–µ–º –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –∫ –ø—Ä–æ–≥–Ω–æ–∑—É
                predictedTotalPoints *= totalInfluenceFactor;
                
                // –ü—Ä–æ–≥–Ω–æ–∑ —Å—á–µ—Ç–∞
                const team1Share = totalPoints > 0 ? score1 / totalPoints : 0.5;
                const team2Share = totalPoints > 0 ? score2 / totalPoints : 0.5;
                
                const predictedScore1 = score1 + (pointsPerMinute * minutesRemainingInGame * team1Share * totalInfluenceFactor);
                const predictedScore2 = score2 + (pointsPerMinute * minutesRemainingInGame * team2Share * totalInfluenceFactor);
                
                // –†–∞—Å—á–µ—Ç —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏—è
                const predictedScoreSum = Math.round(predictedScore1) + Math.round(predictedScore2);
                const totalPrediction = Math.round(predictedTotalPoints);
                const difference = Math.abs(predictedScoreSum - totalPrediction);
                
                // –†–∞—Å—á–µ—Ç —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏
                let confidence = 0;
                if (totalType === 'over') {
                    if (predictedTotalPoints > totalLine) {
                        confidence = 75;
                    } else {
                        confidence = 65;
                    }
                } else if (totalType === 'under') {
                    if (predictedTotalPoints < totalLine) {
                        confidence = 75;
                    } else {
                        confidence = 65;
                    }
                }
                
                // –£—á–µ—Ç –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ —Ç–æ—á–Ω–æ—Å—Ç–∏
                if (difference <= 1) {
                    confidence += 10;
                } else {
                    confidence -= 5;
                }
                
                confidence = Math.min(95, Math.max(50, confidence));
                
                return {
                    predictedTotalPoints: predictedTotalPoints,
                    predictedScore1: predictedScore1,
                    predictedScore2: predictedScore2,
                    pointsPerMinute: pointsPerMinute,
                    totalInfluenceFactor: totalInfluenceFactor,
                    difference: difference,
                    confidence: confidence,
                    fatigueData: fatigueData,
                    dayData: dayData,
                    genderFactor: genderFactor
                };
            }
            
            function processImage(file) {
                const reader = new FileReader();
                
                reader.onload = function(e) {
                    previewImg.src = e.target.result;
                    previewImg.style.display = 'block';
                    
                    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
                    document.getElementById('ocr-score').innerHTML = '<span class="loading"></span>';
                    document.getElementById('ocr-period').innerHTML = '<span class="loading"></span>';
                    document.getElementById('ocr-time').innerHTML = '<span class="loading"></span>';
                    document.getElementById('ocr-time-remaining').innerHTML = '<span class="loading"></span>';
                    document.getElementById('ocr-total').innerHTML = '<span class="loading"></span>';
                    document.getElementById('ocr-total-type').innerHTML = '<span class="loading"></span>';
                    document.getElementById('ocr-handicap').innerHTML = '<span class="loading"></span>';
                    
                    // –°–±—Ä–æ—Å —Å—á–µ—Ç–∞ –ø–æ —á–µ—Ç–≤–µ—Ä—Ç—è–º –ø–µ—Ä–µ–¥ –Ω–æ–≤—ã–º —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ–º
                    resetQuarterScores();
                    
                    showStatus('–ù–∞—á–∏–Ω–∞–µ–º —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞...', 'success');
                    updateProgress(10);
                    
                    // –ó–∞–ø—É—Å–∫–∞–µ–º —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ —Å –ø–æ–º–æ—â—å—é Tesseract
                    Tesseract.recognize(
                        file,
                        'rus+eng',
                        { 
                            logger: m => {
                                if (m.status === 'recognizing text') {
                                    const progress = Math.round(m.progress * 100);
                                    updateProgress(10 + progress * 0.8);
                                    debugInfo.style.display = 'block';
                                    debugText.innerHTML += `–†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ: ${progress}%<br>`;
                                }
                            }
                        }
                    ).then(({ data: { text } }) => {
                        updateProgress(95);
                        debugText.innerHTML += `–†–∞—Å–ø–æ–∑–Ω–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç:<br><textarea rows="5" style="width:100%">${text}</textarea><br>`;
                        showStatus('–¢–µ–∫—Å—Ç —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω, –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º –¥–∞–Ω–Ω—ã–µ...', 'success');
                        processOCRText(text);
                        updateProgress(100);
                        setTimeout(() => {
                            progressBar.style.display = 'none';
                            showStatus('–ê–Ω–∞–ª–∏–∑ –∑–∞–≤–µ—Ä—à–µ–Ω!', 'success');
                        }, 500);
                    }).catch(err => {
                        showStatus('–û—à–∏–±–∫–∞ –ø—Ä–∏ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–∏ —Ç–µ–∫—Å—Ç–∞: ' + err.message, 'error');
                        updateProgress(0);
                    });
                };
                
                reader.readAsDataURL(file);
            }
            
            // –£–õ–£–ß–®–ï–ù–ù–ê–Ø –§–£–ù–ö–¶–ò–Ø –¥–ª—è –ø–æ–∏—Å–∫–∞ –ø–µ—Ä–∏–æ–¥–∞ –∏ –≤—Ä–µ–º–µ–Ω–∏
            function findPeriodAndTime(text) {
                // –†–∞–∑–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã –≤—Ä–µ–º–µ–Ω–∏ –∏ –ø–µ—Ä–∏–æ–¥–∞
                const patterns = [
                    /(\d{1,2}:\d{2})\s*[\(].*?[|]\s*(\d+)-—è (?:—á–µ—Ç–≤–µ—Ä—Ç—å|–ø–µ—Ä–∏–æ–¥|—Ç–∞–π–º)\s*,\s*(\d{1,2}:\d{2})[\)]/i,
                    /(\d{1,2}:\d{2})\s*[|]\s*(\d+)-—è (?:—á–µ—Ç–≤–µ—Ä—Ç—å|–ø–µ—Ä–∏–æ–¥|—Ç–∞–π–º)\s*,\s*(\d{1,2}:\d{2})/i,
                    /(\d+)-—è (?:—á–µ—Ç–≤–µ—Ä—Ç—å|–ø–µ—Ä–∏–æ–¥|—Ç–∞–π–º)\s*[,\s]*(\d{1,2}:\d{2})/i,
                    /(\d+)-—è (?:—á–µ—Ç–≤–µ—Ä—Ç—å|–ø–µ—Ä–∏–æ–¥|—Ç–∞–π–º)/i,
                    /(\d{1,2}:\d{2})\s*[|]/
                ];
                
                for (let pattern of patterns) {
                    const match = text.match(pattern);
                    if (match) {
                        return match;
                    }
                }
                return null;
            }
            
            // –£–õ–£–ß–®–ï–ù–ù–ê–Ø –§–£–ù–ö–¶–ò–Ø –∏–∑–≤–ª–µ—á–µ–Ω–∏—è —Å—á–µ—Ç–∞
            function extractScoreFromLines(lines) {
                let team1Name = '–ö–æ–º–∞–Ω–¥–∞ 1';
                let team2Name = '–ö–æ–º–∞–Ω–¥–∞ 2';
                let team1Scores = [0, 0, 0, 0];
                let team2Scores = [0, 0, 0, 0];
                let team1Total = 0;
                let team2Total = 0;
                let team1Found = false;
                let team2Found = false;
                
                debugText.innerHTML += '=== –ù–ê–ß–ê–õ–û –ê–ù–ê–õ–ò–ó–ê –°–ß–ï–¢–ê ===<br>';
                
                // –ò—â–µ–º —Å—Ç—Ä–æ–∫–∏ —Å –Ω–∞–∑–≤–∞–Ω–∏—è–º–∏ –∫–æ–º–∞–Ω–¥ –∏ –æ—á–∫–∞–º–∏
                for (let i = 0; i < lines.length; i++) {
                    const line = lines[i].trim();
                    if (line.length < 3) continue; // –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –ø—É—Å—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏
                    
                    debugText.innerHTML += `–ê–Ω–∞–ª–∏–∑ —Å—Ç—Ä–æ–∫–∏ ${i}: "${line}"<br>`;
                    
                    // –£–ª—É—á—à–µ–Ω–Ω—ã–π –ø–æ–∏—Å–∫ –ø–∞—Ç—Ç–µ—Ä–Ω–∞: –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã + —Ü–∏—Ñ—Ä—ã (–æ—á–∫–∏ –ø–æ —á–µ—Ç–≤–µ—Ä—Ç—è–º + –æ–±—â–∏–π —Å—á–µ—Ç)
                    // –ü–∞—Ç—Ç–µ—Ä–Ω: —Ç–µ–∫—Å—Ç (–Ω–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã) –∑–∞—Ç–µ–º –Ω–µ—Å–∫–æ–ª—å–∫–æ —á–∏—Å–µ–ª —Ä–∞–∑–¥–µ–ª–µ–Ω–Ω—ã—Ö –ø—Ä–æ–±–µ–ª–∞–º–∏
                    const scorePattern = /([^\d]+?)\s+(\d+)\s+(\d+)\s+(\d+)\s+(\d+)\s+(\d+)$/;
                    const match = line.match(scorePattern);
                    
                    if (match) {
                        debugText.innerHTML += `–ù–∞–π–¥–µ–Ω –ø–∞—Ç—Ç–µ—Ä–Ω —Å—á–µ—Ç–∞: ${match[0]}<br>`;
                        
                        const name = match[1].trim();
                        const scores = match.slice(2, 7).map(Number); // 5 —á–∏—Å–µ–ª: 4 —á–µ—Ç–≤–µ—Ä—Ç–∏ + –æ–±—â–∏–π
                        
                        if (!team1Found) {
                            team1Name = name;
                            team1Scores = scores.slice(0, 4); // –ü–µ—Ä–≤—ã–µ 4 —á–∏—Å–ª–∞ - –æ—á–∫–∏ –ø–æ —á–µ—Ç–≤–µ—Ä—Ç—è–º
                            team1Total = scores[4]; // –ü–æ—Å–ª–µ–¥–Ω–µ–µ —á–∏—Å–ª–æ - –æ–±—â–∏–π —Å—á–µ—Ç
                            team1Found = true;
                            debugText.innerHTML += `–ù–∞–π–¥–µ–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ 1: ${team1Name}, —Å—á–µ—Ç: ${team1Scores.join('-')}, –≤—Å–µ–≥–æ: ${team1Total}<br>`;
                        } else if (!team2Found) {
                            team2Name = name;
                            team2Scores = scores.slice(0, 4);
                            team2Total = scores[4];
                            team2Found = true;
                            debugText.innerHTML += `–ù–∞–π–¥–µ–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ 2: ${team2Name}, —Å—á–µ—Ç: ${team2Scores.join('-')}, –≤—Å–µ–≥–æ: ${team2Total}<br>`;
                            break; // –ù–∞—à–ª–∏ –æ–±–µ –∫–æ–º–∞–Ω–¥—ã
                        }
                    }
                    
                    // –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –ø–æ–∏—Å–∫ –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∞ —Å —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—è–º–∏
                    if (!team1Found || !team2Found) {
                        // –ò—â–µ–º —Å—Ç—Ä–æ–∫–∏, —Å–æ–¥–µ—Ä–∂–∞—â–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ —á–∏—Å–µ–ª –ø–æ–¥—Ä—è–¥ (4-5 —á–∏—Å–µ–ª)
                        const numbers = line.match(/\b\d{1,3}\b/g);
                        if (numbers && numbers.length >= 4) {
                            const scores = numbers.map(Number);
                            debugText.innerHTML += `–ù–∞–π–¥–µ–Ω—ã —á–∏—Å–ª–∞: ${scores.join(', ')}<br>`;
                            
                            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ –≤ —Å—Ç—Ä–æ–∫–µ —Ç–µ–∫—Å—Ç –ø–µ—Ä–µ–¥ —á–∏—Å–ª–∞–º–∏ (–Ω–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã)
                            const textBeforeNumbers = line.substring(0, line.indexOf(numbers[0])).trim();
                            
                            if (textBeforeNumbers && textBeforeNumbers.length > 1) {
                                if (!team1Found) {
                                    team1Name = textBeforeNumbers;
                                    team1Scores = scores.length >= 5 ? scores.slice(0, 4) : scores.slice(0, 4);
                                    team1Total = scores.length >= 5 ? scores[4] : scores.slice(0, 4).reduce((a, b) => a + b, 0);
                                    team1Found = true;
                                    debugText.innerHTML += `–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –ø–æ–∏—Å–∫ - –ö–æ–º–∞–Ω–¥–∞ 1: ${team1Name}, —Å—á–µ—Ç: ${team1Scores.join('-')}, –≤—Å–µ–≥–æ: ${team1Total}<br>`;
                                } else if (!team2Found) {
                                    team2Name = textBeforeNumbers;
                                    team2Scores = scores.length >= 5 ? scores.slice(0, 4) : scores.slice(0, 4);
                                    team2Total = scores.length >= 5 ? scores[4] : scores.slice(0, 4).reduce((a, b) => a + b, 0);
                                    team2Found = true;
                                    debugText.innerHTML += `–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –ø–æ–∏—Å–∫ - –ö–æ–º–∞–Ω–¥–∞ 2: ${team2Name}, —Å—á–µ—Ç: ${team2Scores.join('-')}, –≤—Å–µ–≥–æ: ${team2Total}<br>`;
                                    break;
                                }
                            }
                        }
                    }
                }
                
                // –ï—Å–ª–∏ –Ω–µ –Ω–∞—à–ª–∏ –∫–æ–º–∞–Ω–¥—ã —á–µ—Ä–µ–∑ –ø–∞—Ç—Ç–µ—Ä–Ω—ã, –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ä–µ–∑–µ—Ä–≤–Ω—ã–π –º–µ—Ç–æ–¥
                if (!team1Found || !team2Found) {
                    debugText.innerHTML += '–ò—Å–ø–æ–ª—å–∑—É–µ–º —Ä–µ–∑–µ—Ä–≤–Ω—ã–π –ø–æ–∏—Å–∫ –∫–æ–º–∞–Ω–¥<br>';
                    let scoreLines = [];
                    
                    for (let i = 0; i < lines.length; i++) {
                        const line = lines[i].trim();
                        const numbers = line.match(/\b\d{1,3}\b/g);
                        if (numbers && numbers.length >= 4) {
                            scoreLines.push({line: line, numbers: numbers.map(Number), index: i});
                        }
                    }
                    
                    if (scoreLines.length >= 2) {
                        // –ü–µ—Ä–≤–∞—è —Å—Ç—Ä–æ–∫–∞ —Å —á–∏—Å–ª–∞–º–∏ - –ø–µ—Ä–≤–∞—è –∫–æ–º–∞–Ω–¥–∞
                        const firstNumbers = scoreLines[0].numbers;
                        team1Scores = firstNumbers.length >= 5 ? firstNumbers.slice(0, 4) : firstNumbers.slice(0, 4);
                        team1Total = firstNumbers.length >= 5 ? firstNumbers[4] : firstNumbers.slice(0, 4).reduce((a, b) => a + b, 0);
                        
                        // –í—Ç–æ—Ä–∞—è —Å—Ç—Ä–æ–∫–∞ —Å —á–∏—Å–ª–∞–º–∏ - –≤—Ç–æ—Ä–∞—è –∫–æ–º–∞–Ω–¥–∞
                        const secondNumbers = scoreLines[1].numbers;
                        team2Scores = secondNumbers.length >= 5 ? secondNumbers.slice(0, 4) : secondNumbers.slice(0, 4);
                        team2Total = secondNumbers.length >= 5 ? secondNumbers[4] : secondNumbers.slice(0, 4).reduce((a, b) => a + b, 0);
                        
                        // –ü—ã—Ç–∞–µ–º—Å—è –Ω–∞–π—Ç–∏ –Ω–∞–∑–≤–∞–Ω–∏—è –∫–æ–º–∞–Ω–¥ –≤—ã—à–µ —Å—Ç—Ä–æ–∫ —Å —á–∏—Å–ª–∞–º–∏
                        for (let i = scoreLines[0].index - 1; i >= 0; i--) {
                            const potentialName = lines[i].trim();
                            if (potentialName && potentialName.length > 2 && !potentialName.match(/\d/)) {
                                team1Name = potentialName;
                                break;
                            }
                        }
                        
                        for (let i = scoreLines[1].index - 1; i >= 0; i--) {
                            const potentialName = lines[i].trim();
                            if (potentialName && potentialName.length > 2 && !potentialName.match(/\d/)) {
                                team2Name = potentialName;
                                break;
                            }
                        }
                        
                        team1Found = true;
                        team2Found = true;
                    }
                }
                
                debugText.innerHTML += `–ò–¢–û–ì: ${team1Name} - ${team1Total}, ${team2Name} - ${team2Total}<br>`;
                debugText.innerHTML += '=== –ö–û–ù–ï–¶ –ê–ù–ê–õ–ò–ó–ê –°–ß–ï–¢–ê ===<br>';
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å –¥–∞–Ω–Ω—ã–º–∏ –æ —á–µ—Ç–≤–µ—Ä—Ç—è—Ö
                updateQuarterScores(team1Name, team2Name, team1Scores, team2Scores, team1Total, team2Total);
                
                return {
                    team1Total: team1Total,
                    team2Total: team2Total,
                    teamNames: [team1Name, team2Name]
                };
            }
            
            // –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è calculateRemainingTime
            function calculateRemainingTime(period, timeElapsed) {
                try {
                    const leagueParams = getLeagueParams();
                    const periodLength = leagueParams.periodLength;
                    const totalPeriods = leagueParams.totalPeriods;
                    
                    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –ø–µ—Ä–∏–æ–¥–∞
                    if (period < 1 || period > totalPeriods) {
                        document.getElementById('ocr-time-remaining').textContent = '--';
                        return;
                    }
                    
                    // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ñ–æ—Ä–º–∞—Ç –≤—Ä–µ–º–µ–Ω–∏
                    if (!timeElapsed || !timeElapsed.includes(':')) {
                        document.getElementById('ocr-time-remaining').textContent = '--';
                        return;
                    }
                    
                    const [minutesElapsed, secondsElapsed] = timeElapsed.split(':').map(Number);
                    
                    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –º–∏–Ω—É—Ç—ã –∏ —Å–µ–∫—É–Ω–¥—ã - —á–∏—Å–ª–∞
                    if (isNaN(minutesElapsed) || isNaN(secondsElapsed)) {
                        document.getElementById('ocr-time-remaining').textContent = '--';
                        return;
                    }
                    
                    const totalSecondsElapsed = minutesElapsed * 60 + secondsElapsed;
                    const totalSecondsInPeriod = periodLength * 60;
                    
                    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ–±—ã –ø—Ä–æ—à–µ–¥—à–µ–µ –≤—Ä–µ–º—è –Ω–µ –ø—Ä–µ–≤—ã—à–∞–ª–æ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø–µ—Ä–∏–æ–¥–∞
                    if (totalSecondsElapsed > totalSecondsInPeriod) {
                        document.getElementById('ocr-time-remaining').textContent = '00:00';
                        return;
                    }
                    
                    const totalSecondsRemaining = totalSecondsInPeriod - totalSecondsElapsed;
                    
                    const minutesRemaining = Math.floor(totalSecondsRemaining / 60);
                    const secondsRemaining = totalSecondsRemaining % 60;
                    
                    const timeRemainingFormatted = `${minutesRemaining}:${secondsRemaining.toString().padStart(2, '0')}`;
                    document.getElementById('ocr-time-remaining').textContent = timeRemainingFormatted;
                } catch (error) {
                    console.error('–û—à–∏–±–∫–∞ —Ä–∞—Å—á–µ—Ç–∞ –≤—Ä–µ–º–µ–Ω–∏:', error);
                    document.getElementById('ocr-time-remaining').textContent = '--';
                }
            }
            
            function processOCRText(text) {
                // –†–∞–∑–¥–µ–ª—è–µ–º —Ç–µ–∫—Å—Ç –Ω–∞ —Å—Ç—Ä–æ–∫–∏
                const lines = text.split('\n').filter(line => line.trim() !== '');
                
                debugText.innerHTML += `–í—Å–µ–≥–æ —Å—Ç—Ä–æ–∫: ${lines.length}<br>`;
                
                // –£–ª—É—á—à–µ–Ω–Ω—ã–µ —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è –¥–ª—è —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
                
                // 1. –ü–æ–∏—Å–∫ —Å—á–µ—Ç–∞ –ø–æ —á–µ—Ç–≤–µ—Ä—Ç—è–º
                const scoreData = extractScoreFromLines(lines);
                let score1 = scoreData.team1Total;
                let score2 = scoreData.team2Total;
                teamNames = scoreData.teamNames;
                
                // 2. –ü–æ–∏—Å–∫ —á–µ—Ç–≤–µ—Ä—Ç–∏ –∏ –≤—Ä–µ–º–µ–Ω–∏ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–∏
                const periodTimeMatch = findPeriodAndTime(text);
                let periodMatch, timeMatch;
                
                // –ï—Å–ª–∏ –Ω–µ –Ω–∞—à–ª–∏ —Å–ª–æ–∂–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç, –∏—â–µ–º –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ
                if (!periodTimeMatch) {
                    periodMatch = text.match(/(\d+)-—è (?:—á–µ—Ç–≤–µ—Ä—Ç—å|–ø–µ—Ä–∏–æ–¥|—Ç–∞–π–º)/i);
                    timeMatch = text.match(/(\d{1,2}:\d{2})\s*[|]/);
                }
                
                let period = 1, timeElapsed = "00:00", total = 0, handicap = 0;
                let detectedTotalType = "under"; // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –¢–ú
                
                // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–∏–ø —Ç–æ—Ç–∞–ª–∞
                if (text.includes('–¢–ë') || text.includes('–¢–æ—Ç–∞–ª –ë–æ–ª—å—à–µ') || text.includes('OVER') || text.includes('Over')) {
                    detectedTotalType = 'over';
                } else if (text.includes('–¢–ú') || text.includes('–¢–æ—Ç–∞–ª –ú–µ–Ω—å—à–µ') || text.includes('UNDER') || text.includes('Under')) {
                    detectedTotalType = 'under';
                }
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞ –∫–∏–±–µ—Ä–±–∞—Å–∫–µ—Ç–±–æ–ª
                const isCyberBasketball = text.includes('–ö–∏–±–µ—Ä–±–∞—Å–∫–µ—Ç–±–æ–ª') || text.includes('NBA 2K') || text.includes('ESportsBattle');
                if (isCyberBasketball) {
                    debugText.innerHTML += '–û–±–Ω–∞—Ä—É–∂–µ–Ω –º–∞—Ç—á –∫–∏–±–µ—Ä–±–∞—Å–∫–µ—Ç–±–æ–ª–∞<br>';
                    // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ª–∏–≥—É –∫–∏–±–µ—Ä–±–∞—Å–∫–µ—Ç–±–æ–ª–∞
                    document.getElementById('league-select').value = '5_4_cyber';
                }
                
                debugText.innerHTML += `–ù–∞–π–¥–µ–Ω—ã –¥–∞–Ω–Ω—ã–µ: —Å—á–µ—Ç=${score1 && score2 ? '–¥–∞' : '–Ω–µ—Ç'}, —á–µ—Ç–≤–µ—Ä—Ç—å/–≤—Ä–µ–º—è=${periodTimeMatch ? '–¥–∞' : '–Ω–µ—Ç'}<br>`;
                
                // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –ø–µ—Ä–∏–æ–¥ –∏ –≤—Ä–µ–º—è
                if (periodTimeMatch) {
                    // –§–æ—Ä–º–∞—Ç: xx:xx (–≤—Ä–µ–º—è –Ω–∞—á–∞–ª–∞ –∏–≥—Ä—ã | x-—è —á–µ—Ç–≤–µ—Ä—Ç—å, xx:xx)
                    if (periodTimeMatch.length >= 4) {
                        // –°–ª–æ–∂–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç —Å –≤—Ä–µ–º–µ–Ω–µ–º –Ω–∞—á–∞–ª–∞ –∏–≥—Ä—ã
                        period = parseInt(periodTimeMatch[2]);
                        timeElapsed = periodTimeMatch[3];
                    } else {
                        // –ü—Ä–æ—Å—Ç–æ–π —Ñ–æ—Ä–º–∞—Ç: x-—è —á–µ—Ç–≤–µ—Ä—Ç—å, xx:xx
                        period = parseInt(periodTimeMatch[1]);
                        timeElapsed = periodTimeMatch[2];
                    }
                    
                    document.getElementById('ocr-period').textContent = `${period} –ø–µ—Ä–∏–æ–¥`;
                    document.getElementById('manual-period').value = period;
                    document.getElementById('ocr-time').textContent = timeElapsed;
                    document.getElementById('manual-time').value = timeElapsed;
                    
                    // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –æ—Å—Ç–∞–≤—à–µ–µ—Å—è –≤—Ä–µ–º—è
                    calculateRemainingTime(period, timeElapsed);
                } else if (periodMatch || timeMatch) {
                    // –ï—Å–ª–∏ –Ω–∞—à–ª–∏ –æ—Ç–¥–µ–ª—å–Ω–æ —á–µ—Ç–≤–µ—Ä—Ç—å –∏ –≤—Ä–µ–º—è
                    if (periodMatch) {
                        period = parseInt(periodMatch[1]);
                        document.getElementById('ocr-period').textContent = `${period} –ø–µ—Ä–∏–æ–¥`;
                        document.getElementById('manual-period').value = period;
                    }
                    
                    if (timeMatch) {
                        timeElapsed = timeMatch[1];
                        document.getElementById('ocr-time').textContent = timeElapsed;
                        document.getElementById('manual-time').value = timeElapsed;
                        
                        // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –æ—Å—Ç–∞–≤—à–µ–µ—Å—è –≤—Ä–µ–º—è
                        calculateRemainingTime(period, timeElapsed);
                    }
                }
                
                // 3. –ü–æ–∏—Å–∫ —Ç–æ—Ç–∞–ª–∞
                const totalRegex = /–¢[–ú]\s*[\(]?\s*([\d.,]+)\s*[\)]?/i;
                const alternativeTotalRegex = /–¢[–û0]?[–¢T]?[–êA]?[–õJ]?[^0-9]{0,20}?([\d.,]+)/i;
                let totalMatch = text.match(totalRegex);
                if (!totalMatch) totalMatch = text.match(alternativeTotalRegex);
                
                // 4. –ü–æ–∏—Å–∫ —Ñ–æ—Ä—ã
                const handicapRegex = /–§[12]\s*[\(]([+-]?[\d.,]+)[\)]/i;
                const alternativeHandicapRegex = /(?:–§1|–§2|F1|F2)[\s\S]{0,15}?([+-]?[\d.,]+)/i;
                let handicapMatch = text.match(handicapRegex);
                if (!handicapMatch) handicapMatch = text.match(alternativeHandicapRegex);
                
                // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º —Ç–æ—Ç–∞–ª
                if (totalMatch) {
                    total = parseFloat(totalMatch[1].replace(',', '.'));
                    document.getElementById('ocr-total').textContent = total;
                    document.getElementById('manual-total').value = total;
                    
                    // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º —Ç–∏–ø —Ç–æ—Ç–∞–ª–∞
                    const totalTypeText = detectedTotalType === 'over' ? '–¢–ë' : '–¢–ú';
                    const totalTypeClass = detectedTotalType === 'over' ? 'over' : 'under';
                    document.getElementById('ocr-total-type').innerHTML = total ? `<span class="total-type ${totalTypeClass}">${totalTypeText}</span>` : '--';
                    
                    // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–∏–ø —Ç–æ—Ç–∞–ª–∞ –≤ —Ä—É—á–Ω–æ–º –≤–≤–æ–¥–µ
                    document.getElementById('manual-total-type').value = detectedTotalType;
                    totalType = detectedTotalType;
                }
                
                // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º —Ñ–æ—Ä—É
                if (handicapMatch) {
                    handicap = parseFloat(handicapMatch[1].replace(',', '.'));
                    document.getElementById('ocr-handicap').textContent = handicap;
                    document.getElementById('manual-handicap').value = handicap;
                }
                
                // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º –æ–±—â–∏–π —Å—á–µ—Ç
                if (score1 !== null && score2 !== null) {
                    document.getElementById('ocr-score').textContent = `${score1}:${score2}`;
                    document.getElementById('manual-score').value = `${score1}:${score2}`;
                }
                
                // –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º—Å—è –Ω–∞ –≤–∫–ª–∞–¥–∫—É —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
                tabs.forEach(t => t.classList.remove('active'));
                tabContents.forEach(tc => tc.classList.remove('active'));
                document.querySelector('[data-tab="results"]').classList.add('active');
                document.getElementById('results-tab').classList.add('active');
                
                // –ó–∞–ø—É—Å–∫–∞–µ–º –ø–æ–ª–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –ø–æ–∏—Å–∫–æ–º —É—Å—Ç–∞–ª–æ—Å—Ç–∏
                analyzeWithAutoFatigue(score1, score2, period, timeElapsed, total, handicap, detectedTotalType);
            }
            
            // –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ —Å—á–µ—Ç–∞ –ø–æ —á–µ—Ç–≤–µ—Ä—Ç—è–º
            function updateQuarterScores(team1Name, team2Name, team1Scores, team2Scores, team1Total, team2Total) {
                // –û–±–Ω–æ–≤–ª—è–µ–º –Ω–∞–∑–≤–∞–Ω–∏—è –∫–æ–º–∞–Ω–¥
                document.getElementById('team1-name').textContent = team1Name;
                document.getElementById('team2-name').textContent = team2Name;
                document.getElementById('team1-stats-name').textContent = `${team1Name} (PPG)`;
                document.getElementById('team2-stats-name').textContent = `${team2Name} (PPG)`;
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –æ—á–∫–∏ –ø–æ —á–µ—Ç–≤–µ—Ä—Ç—è–º –¥–ª—è –∫–æ–º–∞–Ω–¥—ã 1
                document.getElementById('team1-q1').textContent = team1Scores[0] || '-';
                document.getElementById('team1-q2').textContent = team1Scores[1] || '-';
                document.getElementById('team1-q3').textContent = team1Scores[2] || '-';
                document.getElementById('team1-q4').textContent = team1Scores[3] || '-';
                document.getElementById('team1-total').textContent = team1Total;
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –æ—á–∫–∏ –ø–æ —á–µ—Ç–≤–µ—Ä—Ç—è–º –¥–ª—è –∫–æ–º–∞–Ω–¥—ã 2
                document.getElementById('team2-q1').textContent = team2Scores[0] || '-';
                document.getElementById('team2-q2').textContent = team2Scores[1] || '-';
                document.getElementById('team2-q3').textContent = team2Scores[2] || '-';
                document.getElementById('team2-q4').textContent = team2Scores[3] || '-';
                document.getElementById('team2-total').textContent = team2Total;
            }
            
            // –ù–û–í–ê–Ø –§–£–ù–ö–¶–ò–Ø: –ê–Ω–∞–ª–∏–∑ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –ø–æ–∏—Å–∫–æ–º —É—Å—Ç–∞–ª–æ—Å—Ç–∏
            async function analyzeWithAutoFatigue(score1, score2, period, timeElapsed, totalInput, handicapInput, totalTypeInput) {
                // –°–∫–∞–Ω–∏—Ä—É–µ–º –≤—Å–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã —É—Å—Ç–∞–ª–æ—Å—Ç–∏
                const scanResult = await scanAllFatigueOptions(score1, score2, period, timeElapsed, totalInput, handicapInput, totalTypeInput);
                
                // –ò—Å–ø–æ–ª—å–∑—É–µ–º –æ–ø—Ç–∏–º–∞–ª—å–Ω—É—é —É—Å—Ç–∞–ª–æ—Å—Ç—å –¥–ª—è —Ä–∞—Å—á–µ—Ç–æ–≤
                currentFatigue = scanResult.optimalFatigue;
                const optimalResultData = fatigueScanResults.find(r => r.fatigueKey === currentFatigue);
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —É—Å—Ç–∞–ª–æ—Å—Ç–∏
                updateFatigueDisplay(currentFatigue);
                
                // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
                optimalResult.style.display = 'block';
                optimalDetails.textContent = `–û–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç: ${fatigueFactors[currentFatigue].name} (—Ä–∞–∑–Ω–∏—Ü–∞: ${optimalResultData.difference} –æ—á–∫–æ–≤)`;
                
                // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–∞–±–ª–∏—Ü—É —Å—Ä–∞–≤–Ω–µ–Ω–∏—è
                updateFatigueComparisonTable();
                
                // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –ø—Ä–æ–≥–Ω–æ–∑ —Å –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–π —É—Å—Ç–∞–ª–æ—Å—Ç—å—é
                generatePredictions(score1, score2, period, timeElapsed, totalInput, handicapInput, totalTypeInput);
                
                // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
                updateStatistics(score1, score2, period, timeElapsed, totalInput, handicapInput, totalTypeInput);
                
                // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –ø—Ä–æ–≥–Ω–æ–∑ –ø–æ —á–µ—Ç–≤–µ—Ä—Ç—è–º
                generateQuarterPredictions(score1, score2, period, timeElapsed);
                
                // –û–±–Ω–æ–≤–ª—è–µ–º —Ñ–∞–∫—Ç–æ—Ä—ã –≤–ª–∏—è–Ω–∏—è
                updateFactorsAnalysis();
            }
            
            // –ù–û–í–ê–Ø –§–£–ù–ö–¶–ò–Ø: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —É—Å—Ç–∞–ª–æ—Å—Ç–∏
            function updateFatigueDisplay(fatigueKey) {
                fatigueOptionsDisplay.forEach(option => {
                    option.classList.remove('active', 'optimal');
                    if (option.getAttribute('data-fatigue') === fatigueKey) {
                        option.classList.add('optimal');
                    }
                });
            }
            
            // –ù–û–í–ê–Ø –§–£–ù–ö–¶–ò–Ø: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã —Å—Ä–∞–≤–Ω–µ–Ω–∏—è —É—Å—Ç–∞–ª–æ—Å—Ç–∏
            function updateFatigueComparisonTable() {
                fatigueComparisonBody.innerHTML = '';
                fatigueComparison.style.display = 'block';
                
                // –°–æ—Ä—Ç–∏—Ä—É–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ —Ä–∞–∑–Ω–∏—Ü–µ (–æ—Ç –º–µ–Ω—å—à–µ–π –∫ –±–æ–ª—å—à–µ–π)
                const sortedResults = [...fatigueScanResults].sort((a, b) => a.difference - b.difference);
                
                sortedResults.forEach((result, index) => {
                    const row = document.createElement('tr');
                    if (result.fatigueKey === optimalFatigue) {
                        row.className = 'optimal-row';
                    }
                    
                    // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –∫–ª–∞—Å—Å –¥–ª—è —è—á–µ–π–∫–∏ —Ä–∞–∑–Ω–∏—Ü—ã
                    let diffClass = '';
                    if (result.difference < 3) {
                        diffClass = 'optimal';
                    } else if (result.difference < 5) {
                        diffClass = 'good';
                    } else {
                        diffClass = 'poor';
                    }
                    
                    row.innerHTML = `
                        <td>${result.fatigueName}</td>
                        <td>${result.factor.toFixed(3)} (${result.effect})</td>
                        <td>${result.predictedScore}</td>
                        <td>${result.predictedTotal}</td>
                        <td class="difference-cell ${diffClass}">${result.difference}</td>
                    `;
                    
                    fatigueComparisonBody.appendChild(row);
                });
            }
            
            function processManualInput() {
                const scoreInput = document.getElementById('manual-score').value;
                const periodInput = parseInt(document.getElementById('manual-period').value);
                const timeInput = document.getElementById('manual-time').value;
                const totalInputValue = document.getElementById('manual-total').value;
                const handicapInputValue = document.getElementById('manual-handicap').value;
                const totalTypeInput = document.getElementById('manual-total-type').value;
                
                if (!scoreInput || !periodInput || !timeInput) {
                    alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è: —Å—á–µ—Ç, –ø–µ—Ä–∏–æ–¥ –∏ –≤—Ä–µ–º—è');
                    return;
                }
                
                const [score1, score2] = scoreInput.split(':').map(Number);
                const totalInput = totalInputValue ? parseFloat(totalInputValue) : 0;
                const handicapInput = handicapInputValue ? parseFloat(handicapInputValue) : 0;
                
                document.getElementById('ocr-score').textContent = `${score1}:${score2}`;
                document.getElementById('ocr-period').textContent = `${periodInput} –ø–µ—Ä–∏–æ–¥`;
                document.getElementById('ocr-time').textContent = timeInput;
                
                // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –æ—Å—Ç–∞–≤—à–µ–µ—Å—è –≤—Ä–µ–º—è
                calculateRemainingTime(periodInput, timeInput);
                
                document.getElementById('ocr-total').textContent = totalInput || '--';
                
                // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º —Ç–∏–ø —Ç–æ—Ç–∞–ª–∞
                const totalTypeText = totalTypeInput === 'over' ? '–¢–ë' : '–¢–ú';
                const totalTypeClass = totalTypeInput === 'over' ? 'over' : 'under';
                document.getElementById('ocr-total-type').innerHTML = totalInput ? `<span class="total-type ${totalTypeClass}">${totalTypeText}</span>` : '--';
                
                document.getElementById('ocr-handicap').textContent = handicapInput || '--';
                
                // –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º—Å—è –Ω–∞ –≤–∫–ª–∞–¥–∫—É —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
                tabs.forEach(t => t.classList.remove('active'));
                tabContents.forEach(tc => tc.classList.remove('active'));
                document.querySelector('[data-tab="results"]').classList.add('active');
                document.getElementById('results-tab').classList.add('active');
                
                // –ó–∞–ø—É—Å–∫–∞–µ–º –ø–æ–ª–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –ø–æ–∏—Å–∫–æ–º —É—Å—Ç–∞–ª–æ—Å—Ç–∏
                analyzeWithAutoFatigue(score1, score2, periodInput, timeInput, totalInput, handicapInput, totalTypeInput);
            }
            
            function generatePredictions(score1, score2, period, timeElapsed, totalLine, handicapLine, totalType) {
                // –ò—Å–ø–æ–ª—å–∑—É–µ–º –æ–ø—Ç–∏–º–∞–ª—å–Ω—É—é —É—Å—Ç–∞–ª–æ—Å—Ç—å
                const prediction = calculatePrediction(score1, score2, period, timeElapsed, totalLine, handicapLine, totalType, currentFatigue);
                
                // –ù–û–í–´–ô –†–ê–°–ß–ï–¢: –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø—Ä–æ–≥–Ω–æ–∑–∞ —Å—á–µ—Ç–∞ –∏ –æ–∂–∏–¥–∞–µ–º–æ–≥–æ —Ç–æ—Ç–∞–ª–∞
                const predictedScoreSum = Math.round(prediction.predictedScore1) + Math.round(prediction.predictedScore2);
                const totalPrediction = Math.round(prediction.predictedTotalPoints);
                const difference = prediction.difference;
                
                // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä (Joker/Banana)
                let indicatorType = 'joker';
                let indicatorMessage = '';
                let explanation = '';
                
                if (difference <= 1) {
                    indicatorType = 'joker';
                    indicatorMessage = '–ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–µ (0-1 –æ—á–∫–æ). –í—ã—Å–æ–∫–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å –ø—Ä–æ–≥–Ω–æ–∑–∞!';
                    explanation = '–†–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–µ 0-1 –æ—á–∫–æ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –≤—ã—Å–æ–∫—É—é —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –ø—Ä–æ–≥–Ω–æ–∑–æ–≤. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–æ—Ç –ø—Ä–æ–≥–Ω–æ–∑.';
                } else {
                    indicatorType = 'banana';
                    indicatorMessage = '–ó–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–µ —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–µ (2 –æ—á–∫–∞ –∏ –±–æ–ª–µ–µ). –¢—Ä–µ–±—É–µ—Ç—Å—è –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ—Å—Ç—å!';
                    explanation = '–†–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–µ 2 –æ—á–∫–∞ –∏ –±–æ–ª–µ–µ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –Ω–∏–∑–∫—É—é —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –ø—Ä–æ–≥–Ω–æ–∑–æ–≤. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑.';
                }
                
                // –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ —Å —É—á–µ—Ç–æ–º —Ç–∏–ø–∞ —Ç–æ—Ç–∞–ª–∞
                let recommendation = "";
                let confidence = prediction.confidence;
                
                if (totalType === 'over') {
                    if (prediction.predictedTotalPoints > totalLine) {
                        recommendation = `–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Å—Ç–∞–≤–∫–∞ –Ω–∞ –¢–û–¢–ê–õ –ë–û–õ–¨–®–ï ${totalLine}`;
                    } else {
                        recommendation = `–ù–ï —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Å—Ç–∞–≤–∫–∞ –Ω–∞ –¢–û–¢–ê–õ –ë–û–õ–¨–®–ï ${totalLine}`;
                    }
                } else if (totalType === 'under') {
                    if (prediction.predictedTotalPoints < totalLine) {
                        recommendation = `–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Å—Ç–∞–≤–∫–∞ –Ω–∞ –¢–û–¢–ê–õ –ú–ï–ù–¨–®–ï ${totalLine}`;
                    } else {
                        recommendation = `–ù–ï —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Å—Ç–∞–≤–∫–∞ –Ω–∞ –¢–û–¢–ê–õ –ú–ï–ù–¨–®–ï ${totalLine}`;
                    }
                }
                
                // –£—á–µ—Ç —Ñ–æ—Ä—ã
                const predictedDifference = prediction.predictedScore1 - prediction.predictedScore2;
                if (handicapLine && Math.abs(predictedDifference - handicapLine) > 3) {
                    if (predictedDifference > handicapLine) {
                        recommendation += ` –∏ –ü–û–ë–ï–î–ê ${teamNames[0]} —Å —Ñ–æ—Ä–æ–π ${handicapLine > 0 ? '+' : ''}${handicapLine}`;
                    } else {
                        recommendation += ` –∏ –ü–û–ë–ï–î–ê ${teamNames[1]} —Å —Ñ–æ—Ä–æ–π ${-handicapLine > 0 ? '+' : ''}${-handicapLine}`;
                    }
                    confidence += 5;
                }
                
                // –£—á–µ—Ç –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ —Ç–æ—á–Ω–æ—Å—Ç–∏ –≤ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
                if (indicatorType === 'joker') {
                    recommendation += ` JOKER: –ø—Ä–æ–≥–Ω–æ–∑ –≤—ã—Å–æ–∫–æ—Ç–æ—á–Ω—ã–π (—Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–µ: ${difference} –æ—á–∫–æ–≤).`;
                } else {
                    recommendation += ` BANANA: –ø—Ä–æ–≥–Ω–æ–∑ –∏–º–µ–µ—Ç –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–µ —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–µ (${difference} –æ—á–∫–æ–≤).`;
                }
                
                // –£—á–µ—Ç —Ñ–∞–∫—Ç–æ—Ä–æ–≤ –≤–ª–∏—è–Ω–∏—è –≤ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
                if (prediction.totalInfluenceFactor > 1.05) {
                    recommendation += ` –£—á–∏—Ç—ã–≤–∞—è —Ñ–∞–∫—Ç–æ—Ä—ã (–¥–µ–Ω—å, —É—Å—Ç–∞–ª–æ—Å—Ç—å), –æ–∂–∏–¥–∞–µ—Ç—Å—è –≤—ã—Å–æ–∫–∞—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏–≤–Ω–æ—Å—Ç—å.`;
                } else if (prediction.totalInfluenceFactor < 0.95) {
                    recommendation += ` –£—á–∏—Ç—ã–≤–∞—è —Ñ–∞–∫—Ç–æ—Ä—ã (–¥–µ–Ω—å, —É—Å—Ç–∞–ª–æ—Å—Ç—å), –æ–∂–∏–¥–∞–µ—Ç—Å—è –Ω–∏–∑–∫–∞—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏–≤–Ω–æ—Å—Ç—å.`;
                }
                
                // –î–æ–±–∞–≤–ª—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–π —É—Å—Ç–∞–ª–æ—Å—Ç–∏
                recommendation += ` –û–ø—Ç–∏–º–∞–ª—å–Ω–∞—è —É—Å—Ç–∞–ª–æ—Å—Ç—å: ${fatigueFactors[currentFatigue].name}.`;
                
                confidence = Math.min(95, Math.max(50, confidence));
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏
                document.getElementById('predicted-total').textContent = Math.round(prediction.predictedTotalPoints);
                document.getElementById('predicted-pace').textContent = prediction.pointsPerMinute.toFixed(2);
                document.getElementById('predicted-score').textContent = `${Math.round(prediction.predictedScore1)}:${Math.round(prediction.predictedScore2)}`;
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –±–ª–æ–∫ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –ø—Ä–æ–≥–Ω–æ–∑–æ–≤
                predictionAccuracy.textContent = `${difference} –æ—á–∫–æ–≤`;
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –±–ª–æ–∫ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è
                comparisonContainer.style.display = 'flex';
                scorePredictionValue.textContent = predictedScoreSum;
                totalPredictionValue.textContent = totalPrediction;
                predictionDifference.textContent = difference;
                predictionDifference.className = `comparison-difference ${difference <= 1 ? 'difference-positive' : 'difference-negative'}`;
                
                // –û–±–Ω–æ–≤–ª—è–µ–º —Ñ–æ–Ω–æ–≤–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–∞–∑–Ω–∏—Ü—ã
                comparisonContainer.classList.remove('joker-bg', 'banana-bg');
                if (difference <= 1) {
                    comparisonContainer.classList.add('joker-bg');
                } else {
                    comparisonContainer.classList.add('banana-bg');
                }
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä
                accuracyIndicator.style.display = 'block';
                if (indicatorType === 'joker') {
                    indicatorIcon.textContent = 'üÉè';
                    indicatorIcon.className = 'indicator-icon joker-indicator';
                    indicatorText.textContent = 'JOKER';
                    indicatorText.className = 'indicator-text joker-text';
                    accuracyDetails.textContent = indicatorMessage;
                    accuracyDetails.style.color = 'var(--joker-color)';
                } else {
                    indicatorIcon.textContent = 'üçå';
                    indicatorIcon.className = 'indicator-icon banana-indicator';
                    indicatorText.textContent = 'BANANA';
                    indicatorText.className = 'indicator-text banana-text';
                    accuracyDetails.textContent = indicatorMessage;
                    accuracyDetails.style.color = 'var(--banana-color)';
                }
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ
                indicatorExplanation.style.display = 'block';
                explanationText.textContent = explanation;
                
                document.getElementById('recommendation-text').textContent = recommendation;
                document.getElementById('confidence-bar').style.width = `${confidence}%`;
                document.getElementById('confidence-value').textContent = `${confidence}%`;
                
                debugText.innerHTML += `–ü—Ä–æ–≥–Ω–æ–∑: —Ç–æ—Ç–∞–ª=${Math.round(prediction.predictedTotalPoints)}, —Å—á–µ—Ç=${Math.round(prediction.predictedScore1)}:${Math.round(prediction.predictedScore2)}<br>`;
                debugText.innerHTML += `–†–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–µ: ${difference} –æ—á–∫–æ–≤ (${indicatorType.toUpperCase()})<br>`;
                debugText.innerHTML += `–û–ø—Ç–∏–º–∞–ª—å–Ω–∞—è —É—Å—Ç–∞–ª–æ—Å—Ç—å: ${fatigueFactors[currentFatigue].name}<br>`;
                debugText.innerHTML += `–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: ${recommendation}<br>`;
            }
            
            function generateQuarterPredictions(score1, score2, period, timeElapsed) {
                const leagueParams = getLeagueParams();
                const quarterPace = leagueParams.quarterPace;
                const periodLength = leagueParams.periodLength;
                
                // –£—á–µ—Ç –≤–ª–∏—è–Ω–∏—è –ø–æ–ª–∞ –∫–æ–º–∞–Ω–¥
                const genderFactor = genderFactors[currentGender];
                genderImpact.textContent = `${currentGender === 'male' ? '–ú—É–∂—á–∏–Ω—ã' : currentGender === 'female' ? '–ñ–µ–Ω—â–∏–Ω—ã' : '–°–º–µ—à–∞–Ω–Ω—ã–µ'} (√ó${genderFactor.toFixed(2)})`;
                
                // –ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –ø–æ —á–µ—Ç–≤–µ—Ä—Ç—è–º
                q2Historical.textContent = `${quarterPace.q2} –æ—á–∫–æ–≤`;
                q3Historical.textContent = `${quarterPace.q3} –æ—á–∫–æ–≤`;
                
                // –ü–†–ò–ú–ï–ù–Ø–ï–ú –§–ê–ö–¢–û–†–´ –í–õ–ò–Ø–ù–ò–Ø –î–õ–Ø –ü–†–û–ì–ù–û–ó–ê –ß–ï–¢–í–ï–†–¢–ï–ô
                const dayData = dayFactors[currentDay];
                const fatigueData = fatigueFactors[currentFatigue];
                
                // –û–±—â–∏–π –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –¥–ª—è —á–µ—Ç–≤–µ—Ä—Ç–µ–π
                const quarterInfluenceFactor = dayData.factor * fatigueData.factor * genderFactor * moonFactor;
                
                // –ü—Ä–æ–≥–Ω–æ–∑ –¥–ª—è 2-–π —á–µ—Ç–≤–µ—Ä—Ç–∏ —Å —É—á–µ—Ç–æ–º —Ç–µ–∫—É—â–µ–≥–æ —Ç–µ–º–ø–∞ –∏ —Ñ–∞–∫—Ç–æ—Ä–æ–≤
                let q2PredictionValue = quarterPace.q2 * quarterInfluenceFactor;
                
                // –ï—Å–ª–∏ –º–∞—Ç—á —É–∂–µ –∏–¥–µ—Ç, –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–µ–º –ø—Ä–æ–≥–Ω–æ–∑ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–µ–∫—É—â–µ–≥–æ —Ç–µ–º–ø–∞
                if (period >= 1) {
                    const [minutesElapsed, secondsElapsed] = timeElapsed.split(':').map(Number);
                    const totalSecondsElapsed = minutesElapsed * 60 + secondsElapsed;
                    const minutesPlayedInQuarter = totalSecondsElapsed / 60;
                    
                    if (period === 1 && minutesPlayedInQuarter > 0) {
                        const currentQuarterPoints = score1 + score2;
                        const currentQuarterPace = currentQuarterPoints / minutesPlayedInQuarter;
                        const quarterMinutes = periodLength;
                        
                        // –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–µ–º –ø—Ä–æ–≥–Ω–æ–∑ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–µ–∫—É—â–µ–≥–æ —Ç–µ–º–ø–∞
                        q2PredictionValue = (q2PredictionValue + (currentQuarterPace * quarterMinutes)) / 2;
                    }
                }
                
                // –ü—Ä–æ–≥–Ω–æ–∑ –¥–ª—è 3-–π —á–µ—Ç–≤–µ—Ä—Ç–∏
                let q3PredictionValue = quarterPace.q3 * quarterInfluenceFactor;
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
                q2Prediction.textContent = Math.round(q2PredictionValue);
                q3Prediction.textContent = Math.round(q3PredictionValue);
                
                // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –¢–ë/–¢–ú –¥–ª—è —á–µ—Ç–≤–µ—Ä—Ç–µ–π
                const q2OverUnder = q2PredictionValue > quarterPace.q2 ? '–¢–ë' : '–¢–ú';
                const q3OverUnder = q3PredictionValue > quarterPace.q3 ? '–¢–ë' : '–¢–ú';
                
                q2Details.textContent = `–¢–ë/–¢–ú: ${q2OverUnder} (${quarterPace.q2})`;
                q3Details.textContent = `–¢–ë/–¢–ú: ${q3OverUnder} (${quarterPace.q3})`;
                
                // –§–æ—Ä–º–∏—Ä—É–µ–º –æ–±—â—É—é —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—é –ø–æ —á–µ—Ç–≤–µ—Ä—Ç—è–º
                let quartersRec = "";
                let quartersConfidence = 75;
                
                if (q2OverUnder === '–¢–ë' && q3OverUnder === '–¢–ë') {
                    quartersRec = "–†–µ–∫–æ–º–µ–Ω–¥—É—é—Ç—Å—è —Å—Ç–∞–≤–∫–∏ –Ω–∞ –¢–ë –≤–æ 2-–π –∏ 3-–π —á–µ—Ç–≤–µ—Ä—Ç—è—Ö";
                    quartersConfidence = 80;
                } else if (q2OverUnder === '–¢–ú' && q3OverUnder === '–¢–ú') {
                    quartersRec = "–†–µ–∫–æ–º–µ–Ω–¥—É—é—Ç—Å—è —Å—Ç–∞–≤–∫–∏ –Ω–∞ –¢–ú –≤–æ 2-–π –∏ 3-–π —á–µ—Ç–≤–µ—Ä—Ç—è—Ö";
                    quartersConfidence = 80;
                } else {
                    quartersRec = `–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è ${q2OverUnder} –≤–æ 2-–π —á–µ—Ç–≤–µ—Ä—Ç–∏ –∏ ${q3OverUnder} –≤ 3-–π —á–µ—Ç–≤–µ—Ä—Ç–∏`;
                    quartersConfidence = 70;
                }
                
                // –£—á–µ—Ç —Ñ–∞–∫—Ç–æ—Ä–æ–≤ –≤–ª–∏—è–Ω–∏—è –≤ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
                if (quarterInfluenceFactor > 1.05) {
                    quartersRec += `. –§–∞–∫—Ç–æ—Ä—ã (–¥–µ–Ω—å, —É—Å—Ç–∞–ª–æ—Å—Ç—å) —É–∫–∞–∑—ã–≤–∞—é—Ç –Ω–∞ –ø–æ–≤—ã—à–µ–Ω–Ω—É—é —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏–≤–Ω–æ—Å—Ç—å.`;
                    quartersConfidence += 5;
                } else if (quarterInfluenceFactor < 0.95) {
                    quartersRec += `. –§–∞–∫—Ç–æ—Ä—ã (–¥–µ–Ω—å, —É—Å—Ç–∞–ª–æ—Å—Ç—å) —É–∫–∞–∑—ã–≤–∞—é—Ç –Ω–∞ –ø–æ–Ω–∏–∂–µ–Ω–Ω—É—é —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏–≤–Ω–æ—Å—Ç—å.`;
                    quartersConfidence += 5;
                }
                
                // –î–æ–±–∞–≤–ª—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–π —É—Å—Ç–∞–ª–æ—Å—Ç–∏
                quartersRec += ` –û–ø—Ç–∏–º–∞–ª—å–Ω–∞—è —É—Å—Ç–∞–ª–æ—Å—Ç—å: ${fatigueData.name}.`;
                
                quartersRecommendation.textContent = quartersRec;
                quartersConfidenceBar.style.width = `${quartersConfidence}%`;
                quartersConfidenceValue.textContent = `${quartersConfidence}%`;
            }
            
            function updateStatistics(score1, score2, period, timeElapsed, totalLine, handicapLine, totalType) {
                const leagueParams = getLeagueParams();
                const periodLength = leagueParams.periodLength;
                const totalPeriods = leagueParams.totalPeriods;
                const leaguePace = leagueParams.leaguePace;
                
                // –ü–∞—Ä—Å–∏–º –ø—Ä–æ—à–µ–¥—à–µ–µ –≤—Ä–µ–º—è –≤ —á–µ—Ç–≤–µ—Ä—Ç–∏
                const [minutesElapsed, secondsElapsed] = timeElapsed.split(':').map(Number);
                const totalSecondsElapsed = minutesElapsed * 60 + secondsElapsed;
                const totalSecondsInPeriod = periodLength * 60;
                
                // –†–∞—Å—á–µ—Ç –ø—Ä–æ—à–µ–¥—à–µ–≥–æ –∏ –æ—Å—Ç–∞–≤—à–µ–≥–æ—Å—è –≤—Ä–µ–º–µ–Ω–∏ –≤ –º–∞—Ç—á–µ
                const totalSecondsPlayed = (period - 1) * totalSecondsInPeriod + totalSecondsElapsed;
                const totalSecondsInGame = totalPeriods * totalSecondsInPeriod;
                
                // –†–∞—Å—á–µ—Ç —Ç–µ–∫—É—â–µ–≥–æ —Ç–µ–º–ø–∞ –∏–≥—Ä—ã (–æ—á–∫–æ–≤ –≤ –º–∏–Ω—É—Ç—É)
                const totalPoints = score1 + score2;
                const minutesPlayed = totalSecondsPlayed / 60;
                const pointsPerMinute = minutesPlayed > 0 ? totalPoints / minutesPlayed : 0;
                
                // –ü—Ä–æ–≥—Ä–µ—Å—Å –º–∞—Ç—á–∞ –≤ –ø—Ä–æ—Ü–µ–Ω—Ç–∞—Ö
                const matchProgress = Math.round((totalSecondsPlayed / totalSecondsInGame) * 100);
                
                // –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∞—Ç–∞–∫–∏ (—É—Å–ª–æ–≤–Ω—ã–π —Ä–∞—Å—á–µ—Ç)
                const offensiveEfficiency = (pointsPerMinute / leaguePace * 100).toFixed(1);
                
                // PPG (Points Per Game) –¥–ª—è –∫–æ–º–∞–Ω–¥
                const team1Ppg = (score1 / minutesPlayed * 40).toFixed(1);
                const team2Ppg = (score2 / minutesPlayed * 40).toFixed(1);
                
                // –ê–Ω–∞–ª–∏–∑ —Ç–æ—Ç–∞–ª–∞
                let totalAnalysis = "";
                let analysisConfidence = 0;
                
                if (totalLine) {
                    // –ò—Å–ø–æ–ª—å–∑—É–µ–º –æ–ø—Ç–∏–º–∞–ª—å–Ω—É—é —É—Å—Ç–∞–ª–æ—Å—Ç—å
                    const fatigueData = fatigueFactors[currentFatigue];
                    const totalInfluenceFactor = dayFactors[currentDay].factor * fatigueData.factor * genderFactors[currentGender] * moonFactor;
                    
                    const predictedTotal = (totalPoints + (pointsPerMinute * (totalSecondsInGame - totalSecondsPlayed) / 60)) * totalInfluenceFactor;
                    
                    if (totalType === 'over') {
                        if (predictedTotal > totalLine) {
                            totalAnalysis = `–¢–µ–∫—É—â–∏–π —Ç–µ–º–ø –∏–≥—Ä—ã (${pointsPerMinute.toFixed(2)} –æ—á–∫–æ–≤/–º–∏–Ω) –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –¢–ë ${totalLine}.`;
                            analysisConfidence = 75;
                        } else {
                            totalAnalysis = `–¢–µ–∫—É—â–∏–π —Ç–µ–º–ø –∏–≥—Ä—ã (${pointsPerMinute.toFixed(2)} –æ—á–∫–æ–≤/–º–∏–Ω) –ù–ï –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –¢–ë ${totalLine}.`;
                            analysisConfidence = 65;
                        }
                    } else {
                        if (predictedTotal < totalLine) {
                            totalAnalysis = `–¢–µ–∫—É—â–∏–π —Ç–µ–º–ø –∏–≥—Ä—ã (${pointsPerMinute.toFixed(2)} –æ—á–∫–æ–≤/–º–∏–Ω) –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –¢–ú ${totalLine}.`;
                            analysisConfidence = 75;
                        } else {
                            totalAnalysis = `–¢–µ–∫—É—â–∏–π —Ç–µ–º–ø –∏–≥—Ä—ã (${pointsPerMinute.toFixed(2)} –æ—á–∫–æ–≤/–º–∏–Ω) –ù–ï –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –¢–ú ${totalLine}.`;
                            analysisConfidence = 65;
                        }
                    }
                    
                    // –î–æ–±–∞–≤–ª—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ñ–∞–∫—Ç–æ—Ä–∞—Ö –≤–ª–∏—è–Ω–∏—è
                    totalAnalysis += ` –£—á–µ—Ç —Ñ–∞–∫—Ç–æ—Ä–æ–≤ (–¥–µ–Ω—å, —É—Å—Ç–∞–ª–æ—Å—Ç—å) ${totalInfluenceFactor > 1 ? '—É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç' : '—É–º–µ–Ω—å—à–∞–µ—Ç'} –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä—É–µ–º—ã–π —Ç–æ—Ç–∞–ª –Ω–∞ ${Math.abs((totalInfluenceFactor - 1) * 100).toFixed(1)}%.`;
                    
                    // –î–æ–±–∞–≤–ª—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–π —É—Å—Ç–∞–ª–æ—Å—Ç–∏
                    totalAnalysis += ` –û–ø—Ç–∏–º–∞–ª—å–Ω–∞—è —É—Å—Ç–∞–ª–æ—Å—Ç—å: ${fatigueData.name}.`;
                }
                
                // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
                document.getElementById('current-pace').textContent = pointsPerMinute.toFixed(2);
                document.getElementById('league-pace').textContent = leaguePace.toFixed(2);
                document.getElementById('match-progress').textContent = matchProgress + "%";
                document.getElementById('offensive-efficiency').textContent = offensiveEfficiency + "%";
                document.getElementById('team1-ppg').textContent = team1Ppg;
                document.getElementById('team2-ppg').textContent = team2Ppg;
                document.getElementById('total-analysis').textContent = totalAnalysis;
                document.getElementById('analysis-confidence-bar').style.width = `${analysisConfidence}%`;
                document.getElementById('analysis-confidence-value').textContent = `${analysisConfidence}%`;
            }
            
            // –ù–û–í–ê–Ø –§–£–ù–ö–¶–ò–Ø: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∞–Ω–∞–ª–∏–∑–∞ —Ñ–∞–∫—Ç–æ—Ä–æ–≤ –≤–ª–∏—è–Ω–∏—è
            function updateFactorsAnalysis() {
                const dayData = dayFactors[currentDay];
                const fatigueData = fatigueFactors[currentFatigue];
                const genderFactor = genderFactors[currentGender];
                
                // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –æ–±—â–∏–π –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –≤–ª–∏—è–Ω–∏—è
                const totalInfluenceFactor = dayData.factor * fatigueData.factor * genderFactor * moonFactor;
                const totalInfluencePercent = (totalInfluenceFactor - 1) * 100;
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –∑–Ω–∞—á–µ–Ω–∏—è —Ñ–∞–∫—Ç–æ—Ä–æ–≤
                dayFactorValue.textContent = `${dayData.factor.toFixed(3)} (${dayData.effect})`;
                fatigueFactorValue.textContent = `${fatigueData.factor.toFixed(3)} (${fatigueData.effect})`;
                genderFactorValue.textContent = `${genderFactor.toFixed(3)}`;
                moonFactorValue.textContent = `${moonFactor.toFixed(3)}`;
                totalFactorValue.textContent = `${totalInfluenceFactor.toFixed(3)} (${totalInfluencePercent > 0 ? '+' : ''}${totalInfluencePercent.toFixed(1)}%)`;
                
                // –°–æ–∑–¥–∞–µ–º –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—é –≤–ª–∏—è–Ω–∏—è –¥–Ω—è –Ω–µ–¥–µ–ª–∏
                let dayImpactHTML = '';
                
                // –î–æ–±–∞–≤–ª—è–µ–º —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –±–ª–æ–∫–∏ –¥–ª—è –≤—ã—Ö–æ–¥–Ω—ã—Ö –∏ –ø—Ä–∞–π–º-—Ç–∞–π–º–∞
                if (currentDay === 5 || currentDay === 6 || currentDay === 0) {
                    dayImpactHTML += `<div class="weekend-effect">
                        <i class="fas fa-star"></i> –í—ã—Ö–æ–¥–Ω–æ–π –¥–µ–Ω—å: –ø–æ–≤—ã—à–µ–Ω–Ω–∞—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏–≤–Ω–æ—Å—Ç—å –æ–∂–∏–¥–∞–µ—Ç—Å—è
                    </div>`;
                }
                
                if (currentDay === 0) {
                    dayImpactHTML += `<div class="prime-time">
                        <i class="fas fa-tv"></i> –¢–µ–ª–µ–≤–∏–∑–∏–æ–Ω–Ω—ã–π –¥–µ–Ω—å: –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –∑—Ä–∏—Ç–µ–ª—å—Å–∫–∞—è –∞—É–¥–∏—Ç–æ—Ä–∏—è
                    </div>`;
                }
                
                if (currentFatigue === 'tired' || currentFatigue === 'exhausted') {
                    dayImpactHTML += `<div class="fatigue-warning">
                        <i class="fas fa-bed"></i> –í—ã—Å–æ–∫–∞—è —É—Å—Ç–∞–ª–æ—Å—Ç—å –∫–æ–º–∞–Ω–¥: –æ–∂–∏–¥–∞–µ—Ç—Å—è —Å–Ω–∏–∂–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏–≤–Ω–æ—Å—Ç–∏
                    </div>`;
                }
                
                // –î–æ–±–∞–≤–ª—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–π —É—Å—Ç–∞–ª–æ—Å—Ç–∏
                dayImpactHTML += `<div class="optimal-result">
                    <div class="optimal-title">üéØ –û–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç —É—Å—Ç–∞–ª–æ—Å—Ç–∏: ${fatigueData.name}</div>
                    <div class="optimal-details">–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç: ${fatigueData.factor.toFixed(3)} (${fatigueData.effect}) | –í–ª–∏—è–Ω–∏–µ –Ω–∞ —Ç–æ—Ç–∞–ª: ${fatigueData.effect}</div>
                </div>`;
                
                // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—â—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤–ª–∏—è–Ω–∏–∏ –¥–Ω—è
                dayImpactHTML += `<div class="day-impact">
                    <div class="day-icon"><i class="fas fa-calendar-day"></i></div>
                    <div class="day-text">${dayData.name}: ${dayData.desc}. –í–ª–∏—è–Ω–∏–µ –Ω–∞ —Ç–æ—Ç–∞–ª: <span class="factor-badge ${dayData.effect.includes('+') ? 'positive' : dayData.effect.includes('-') ? 'negative' : 'neutral'}">${dayData.effect}</span></div>
                </div>`;
                
                dayImpactContainer.innerHTML = dayImpactHTML;
                
                // –§–æ—Ä–º–∏—Ä—É–µ–º –∏—Ç–æ–≥–æ–≤—ã–π –∞–Ω–∞–ª–∏–∑
                let factorsAnalysisText = "";
                let factorsConfidence = 75;
                
                if (totalInfluenceFactor > 1.05) {
                    factorsAnalysisText = `–°—É–º–º–∞—Ä–Ω–æ–µ –≤–ª–∏—è–Ω–∏–µ —Ñ–∞–∫—Ç–æ—Ä–æ–≤ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –í–´–°–û–ö–£–Æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏–≤–Ω–æ—Å—Ç—å –º–∞—Ç—á–∞. –û–∂–∏–¥–∞–µ—Ç—Å—è —Ç–æ—Ç–∞–ª –≤—ã—à–µ —Å—Ä–µ–¥–Ω–µ–≥–æ.`;
                    factorsConfidence = 80;
                } else if (totalInfluenceFactor < 0.95) {
                    factorsAnalysisText = `–°—É–º–º–∞—Ä–Ω–æ–µ –≤–ª–∏—è–Ω–∏–µ —Ñ–∞–∫—Ç–æ—Ä–æ–≤ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –ù–ò–ó–ö–£–Æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏–≤–Ω–æ—Å—Ç—å –º–∞—Ç—á–∞. –û–∂–∏–¥–∞–µ—Ç—Å—è —Ç–æ—Ç–∞–ª –Ω–∏–∂–µ —Å—Ä–µ–¥–Ω–µ–≥–æ.`;
                    factorsConfidence = 80;
                } else {
                    factorsAnalysisText = `–°—É–º–º–∞—Ä–Ω–æ–µ –≤–ª–∏—è–Ω–∏–µ —Ñ–∞–∫—Ç–æ—Ä–æ–≤ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –°–†–ï–î–ù–Æ–Æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏–≤–Ω–æ—Å—Ç—å –º–∞—Ç—á–∞. –û–∂–∏–¥–∞–µ—Ç—Å—è —Ç–æ—Ç–∞–ª –±–ª–∏–∑–∫–∏–π –∫ —Å—Ä–µ–¥–Ω–µ–º—É.`;
                    factorsConfidence = 70;
                }
                
                // –î–æ–±–∞–≤–ª—è–µ–º –¥–µ—Ç–∞–ª–∏ –ø–æ –∫–∞–∂–¥–æ–º—É —Ñ–∞–∫—Ç–æ—Ä—É
                factorsAnalysisText += ` –û—Å–Ω–æ–≤–Ω—ã–µ –≤–ª–∏—è–Ω–∏—è: –¥–µ–Ω—å –Ω–µ–¥–µ–ª–∏ ${dayData.effect}, —É—Å—Ç–∞–ª–æ—Å—Ç—å ${fatigueData.effect}.`;
                
                // –î–æ–±–∞–≤–ª—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–π —É—Å—Ç–∞–ª–æ—Å—Ç–∏
                factorsAnalysisText += ` –û–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç —É—Å—Ç–∞–ª–æ—Å—Ç–∏ –≤—ã–±—Ä–∞–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.`;
                
                factorsAnalysis.textContent = factorsAnalysisText;
                factorsConfidenceBar.style.width = `${factorsConfidence}%`;
                factorsConfidenceValue.textContent = `${factorsConfidence}%`;
            }
        });
    </script>
</body>
</html>
